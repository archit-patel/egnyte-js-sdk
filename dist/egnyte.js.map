{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4d364dd31bf97f4a4aa0","webpack:///./src/api/ENDPOINTS.js","webpack:///./src/core/errors/mkerr.js","webpack:///./src/core/helpers.js","webpack:///./src/core/index.js","webpack:///./src/egnyte.browser.js","webpack:///./src/core/reqengine.js","webpack:///./src/core/errors/errorify.js","webpack:///./src/core/decorators/index.js","webpack:///./src/core/decorators/customize.js","webpack:///./src/core/decorators/query.js","webpack:///./src/core/decorators/beforeSend.js","webpack:///./src/core/inputHandler.js","webpack:///./src/api/auth.js","webpack:///./src/api/fs.js","webpack:///./src/api/fs-browser.js","webpack:///./src/api/links.js","webpack:///./src/api/users.js","webpack:///./src/frontend/index.js","webpack:///./src/frontend/filepicker/index.jsx","webpack:///./src/frontend/filepicker/app.jsx","webpack:///./node_modules/hyperapp/src/index.js","webpack:///./node_modules/hyperapp/src/h.js","webpack:///./node_modules/hyperapp/src/app.js","webpack:///./src/index.js","webpack:///./src/defaults.js","webpack:///./node_modules/xhr/index.js","webpack:///./node_modules/xhr/node_modules/global/window.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/xhr/node_modules/once/once.js","webpack:///./node_modules/xhr/node_modules/parse-headers/parse-headers.js","webpack:///./node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js","webpack:///./node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js","webpack:///./node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js"],"names":["module","exports","helpers","require","mkerr","fields","error","Error","message","statusCode","hintDeveloper","hint","Object","assign","disallowedChars","encodeNameSafe","name","test","replace","encodePathComponents","path","split","map","encodeURIComponent","join","normalizeEgnyteDomain","domain","normalizeURL","url","err","console","warn","requestEngineFactory","decorators","inputHandler","plugins","Set","mkReqFunctionFactory","guarantees","apiFacadeMethod","tools","configure","input","process","instance","options","requestEngine","core","setDomain","normalizedDomain","egnyteDomainURL","API","manual","_","mkReqFunction","forEach","p","init","plug","plugin","add","errorify","enginePrototypeMethods","Engine","authType","token","requestHandler","httpRequest","quota","startOfTheSecond","calls","retrying","queue","queueHandler","_rollQueue","bind","prototype","createEngine","isAuthorized","getToken","setToken","externalToken","dropToken","params","obj","str","hasOwnProperty","push","length","getEndpoint","appendice","endpoint","charAt","sendRequest","opts","callback","forceNoAuth","self","requestDefaults","originalOpts","headers","timer","retry","retryHandler","timerStart","call","response","body","JSON","parse","e","retryAfter","masheryCode","handleQuota","setTimeout","RATE","onInvalidToken","auth","timerEnd","retrieveStreamFromRequest","Promise","resolve","reject","requestFunction","req","clearTimeout","to","promiseRequest","setupTiming","getTimer","timeEnd","currentWait","_quotaWaitTime","QPS","shift","now","Date","diff","isMsg","htmlMsgRegex","findMessage","result","i","psychicMessageParser","mess","nice","code","activeDecorators","reduce","optsModified","decorator","updatedOpts","execute","customizeRequest","queryParams","beforeSend","originalInput","requires","key","undefined","optional","fsIdentification","fileId","folderId","handleIdentification","goodId","detectIncorrectId","id","toString","pathFromRoot","ENDPOINTS","authAPI","getUserInfo","decorate","then","method","userinfo","fsAPI","get","fsmeta","versionEntryId","exists","parents","createFolder","json","move","transfer","copy","remove","storage","action","newPath","destination","fsBrowserAPI","download","fscontent","isBinary","responseType","storeFile","file","mimeType","storeFileMultipart","window","FormData","fileOrBlob","formData","append","ENDPOINTS_links","links","linksAPI","createLink","linkSetup","defaults","type","accessibility","setup","removeLink","listLink","listLinks","filters","findOne","list","ids","link","usersAPI","getById","users","getByName","filter","resources","user","filePickerInit","filePicker","containerNode","targetNode","perPage","root","state","listing","page","pagesTotal","actions","listFolder","folderPath","update","count","offset","Math","ceil","folder","total_count","concat","folders","files","callbacks","selection","isSelected","cancel","events","load","view","item","is_folder"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC7DAA,OAAOC,OAAP,GAAiB;AACb,cAAU,QADG;AAEb,iBAAa,gBAFA;AAGb,iBAAa,wBAHA;AAIb,aAAS,WAJI;AAKb,aAAS,WALI;AAMb,aAAS,WANI;AAOb,gBAAY,cAPC;AAQb,aAAS,YARI;AASb,cAAU,YATG;AAUb,cAAU,YAVG;AAWb,oBAAgB,mBAXH;AAYb,iBAAa;AAZA,CAAjB,C;;;;;;;;;ACAA,IAAMC,UAAU,mBAAAC,CAAQ,CAAR,CAAhB;AACAH,OAAOC,OAAP,GAAiB,SAASG,KAAT,CAAeC,MAAf,EAAuBC,KAAvB,EAA6B;AAC1CA,YAAQA,SAASC,MAAMF,OAAOG,OAAb,CAAjB;AACAH,WAAOI,UAAP,GAAoBJ,OAAOI,UAAP,IAAqB,CAAzC;AACAP,YAAQQ,aAAR,CAAsBL,OAAOM,IAA7B,EAAmCL,KAAnC;AACA,WAAOM,OAAOC,MAAP,CAAcP,KAAd,EAAqBD,MAArB,CAAP;AACH,CALD,C;;;;;;;;;ACDA,IAAIS,kBAAkB,aAAtB;;AAEA,IAAMZ,UAAU;AACZa,kBADY,0BACIC,IADJ,EACU;AAClB,YAAI,CAACA,IAAL,EAAW;AACP,kBAAM,IAAIT,KAAJ,CAAU,eAAV,CAAN;AACH;AACD,YAAIO,gBAAgBG,IAAhB,CAAqBD,IAArB,CAAJ,EAAgC;AAC5B,kBAAM,IAAIT,KAAJ,CAAU,+BAAV,CAAN;AACH;;AAEDS,eAAOA,KAAKE,OAAL,CAAa,OAAb,EAAsB,GAAtB,CAAP;;AAEA,eAAQF,IAAR;AACH,KAZW;AAaZG,wBAbY,gCAaUC,IAbV,EAagB;AACxBA,eAAOlB,QAAQa,cAAR,CAAuBK,IAAvB,CAAP;AACA,eAAOA,KAAKC,KAAL,CAAW,GAAX,EAAgBC,GAAhB,CAAoBC,kBAApB,EAAwCC,IAAxC,CAA6C,GAA7C,EAAkDN,OAAlD,CAA0D,IAA1D,EAA+D,KAA/D,CAAP;AACA;AACH,KAjBW;AAkBZO,yBAlBY,iCAkBWC,MAlBX,EAkBmB;AAC3B,eAAO,aAAcxB,QAAQyB,YAAR,CAAqBD,MAArB,EAA6BR,OAA7B,CAAqC,cAArC,EAAqD,EAArD,CAArB;AACH,KApBW;AAqBZS,gBArBY,wBAqBCC,GArBD,EAqBM;AACd,eAAQA,GAAD,CAAMV,OAAN,CAAc,MAAd,EAAsB,EAAtB,CAAP;AACH,KAvBW;AAwBZR,iBAxBY,yBAwBEC,IAxBF,EAwBQkB,GAxBR,EAwBY;AACpB;AACAC,mBAAWA,QAAQC,IAAR,CAAapB,IAAb,EAAmBkB,GAAnB,CAAX;AACH;AA3BW,CAAhB;;AA+BA7B,OAAOC,OAAP,GAAiBC,OAAjB,C;;;;;;;ACjCA;;AACA,IAAM8B,uBAAuB,mBAAA7B,CAAQ,CAAR,CAA7B;AACA,IAAMD,UAAU,mBAAAC,CAAQ,CAAR,CAAhB;AACA,IAAM8B,aAAa,mBAAA9B,CAAQ,CAAR,CAAnB;AACA,IAAM+B,eAAe,mBAAA/B,CAAQ,EAAR,CAArB;AACA,IAAMC,QAAQ,mBAAAD,CAAQ,CAAR,CAAd;;AAEA,IAAMgC,UAAU,IAAIC,GAAJ,EAAhB;;AAEA,IAAMC,uBAAuB,SAAvBA,oBAAuB;AAAA,WAAS,UAACC,UAAD,EAAaC,eAAb;AAAA,eAAiC;AAAA,mBACnEA,gBAAgBC,KAAhB,EAAuBP,WAAWQ,SAAX,CAAqBC,KAArB,CAAvB,EAAoDR,aAAaS,OAAb,CAAqBD,KAArB,EAA4BJ,UAA5B,CAApD,CADmE;AAAA,SAAjC;AAAA,KAAT;AAAA,CAA7B;;AAIAtC,OAAOC,OAAP,GAAiB;AACb2C,YADa,oBACJC,OADI,EACI;AACb,YAAML,QAAQ;AACVM,2BAAed,qBAAqBa,OAArB,CADL;AAEV3C,qBAASA,OAFC;AAGVE,wBAHU;AAIV8B;AAJU,SAAd;AAMA,YAAMa,OAAO;AACTC,qBADS,qBACCtB,MADD,EACQ;AACb,oBAAMuB,mBAAmBvB,SAAQxB,QAAQuB,qBAAR,CAA8BC,MAA9B,CAAR,GAAgD,IAAzE;AACAmB,wBAAQK,eAAR,GAA0BD,gBAA1B;AACAF,qBAAKrB,MAAL,GAAcuB,gBAAd;AACH,aALQ;;AAMTE,iBAAI;AACAC,wBAAQZ,MAAMM;AADd,aANK;AASTpB,oBAAQ,IATC;AAUT2B,eAAE;AACEC,+BAAejB,qBAAqBG,KAArB;AADjB;AAVO,SAAb;AAcAL,gBAAQoB,OAAR,CAAgB;AAAA,mBAAGC,EAAEC,IAAF,CAAOV,IAAP,CAAH;AAAA,SAAhB;AACA,eAAOA,IAAP;AACH,KAxBY;AAyBbW,QAzBa,gBAyBRC,MAzBQ,EAyBD;AACR;AACAxB,gBAAQyB,GAAR,CAAYD,MAAZ;AACH,KA5BY;;AA6BbN,OAAE;AACEnD,wBADF;AAEEiC,wBAFF;AAGEH;AAHF;AA7BW,CAAjB,C;;;;;;;;;ACbA,IAAMe,OAAO,mBAAA5C,CAAQ,CAAR,CAAb;AACA4C,KAAKW,IAAL,CAAU,mBAAAvD,CAAQ,EAAR,CAAV;AACA4C,KAAKW,IAAL,CAAU,mBAAAvD,CAAQ,EAAR,CAAV;AACA4C,KAAKW,IAAL,CAAU,mBAAAvD,CAAQ,EAAR,CAAV;AACA4C,KAAKW,IAAL,CAAU,mBAAAvD,CAAQ,EAAR,CAAV;AACA4C,KAAKW,IAAL,CAAU,mBAAAvD,CAAQ,EAAR,CAAV;AACA4C,KAAKW,IAAL,CAAU,mBAAAvD,CAAQ,EAAR,CAAV;AACAH,OAAOC,OAAP,GAAiB,mBAAAE,CAAQ,EAAR,CAAjB,C;;;;;;;;;ACPA,IAAI0D,WAAW,mBAAA1D,CAAQ,CAAR,CAAf;;AAEA,IAAI2D,yBAAyB,EAA7B;;AAEA,SAASC,MAAT,CAAgBlB,OAAhB,EAAyB;AACrB,SAAKmB,QAAL,GAAgB,QAAhB;AACA,SAAKnB,OAAL,GAAeA,OAAf;AACA,SAAKoB,KAAL,GAAapB,QAAQoB,KAArB;;AAEA,SAAKC,cAAL,GAAsBrB,QAAQsB,WAA9B;;AAEA,SAAKC,KAAL,GAAa;AACTC,0BAAkB,CADT;AAETC,eAAO,CAFE;AAGTC,kBAAU;AAHD,KAAb;AAKA,SAAKC,KAAL,GAAa,EAAb;;AAEA,SAAKC,YAAL,GAAoBC,WAAWC,IAAX,CAAgB,IAAhB,CAApB;AACH;AACDZ,OAAOa,SAAP,GAAmBd,sBAAnB;;AAEA9D,OAAOC,OAAP,GAAiB,SAAS4E,YAAT,CAAsBhC,OAAtB,EAA+B;AAC5C,WAAO,IAAIkB,MAAJ,CAAWlB,OAAX,CAAP;AACH,CAFD;;AAMA;AACA;;;AAGAiB,uBAAuBgB,YAAvB,GAAsC,YAAY;AAC9C,WAAO,CAAC,CAAC,KAAKb,KAAd;AACH,CAFD;;AAIAH,uBAAuBiB,QAAvB,GAAkC,YAAY;AAC1C,WAAO,KAAKd,KAAZ;AACH,CAFD;;AAIAH,uBAAuBkB,QAAvB,GAAkC,UAAUC,aAAV,EAAyB;AACvD,SAAKhB,KAAL,GAAagB,aAAb;AACH,CAFD;;AAKAnB,uBAAuBoB,SAAvB,GAAmC,UAAUD,aAAV,EAAyB;AACxD,SAAKhB,KAAL,GAAa,IAAb;AACH,CAFD;;AAKA;AACA;AACA,SAASkB,MAAT,CAAgBC,GAAhB,EAAqB;AACjB,QAAIC,MAAM,EAAV;AACA,SAAK,IAAI7B,CAAT,IAAc4B,GAAd,EAAmB;AACf,YAAIA,IAAIE,cAAJ,CAAmB9B,CAAnB,CAAJ,EAA2B;AACvB6B,gBAAIE,IAAJ,CAAShE,mBAAmBiC,CAAnB,IAAwB,GAAxB,GAA8BjC,mBAAmB6D,IAAI5B,CAAJ,CAAnB,CAAvC;AACH;AACJ;AACD,QAAI6B,IAAIG,MAAR,EAAgB;AACZ,eAAO,MAAMH,IAAI7D,IAAJ,CAAS,GAAT,CAAb;AACH,KAFD,MAEO;AACH,eAAO,EAAP;AACH;AACJ;AACDsC,uBAAuB2B,WAAvB,GAAqC,UAAUC,SAAV,EAAqB;AACtD,QAAIC,WAAW,KAAK9C,OAAL,CAAaK,eAAb,GAA+B,SAA9C;AACA,QAAIwC,SAAJ,EAAe;AACX,YAAIA,UAAUE,MAAV,CAAiB,CAAjB,MAAwB,GAA5B,EAAiC;AAC7BF,wBAAY,MAAMA,SAAlB;AACH;AACDC,oBAAYD,SAAZ;AACH;AACD,WAAOC,QAAP;AACH,CATD;;AAWA7B,uBAAuB+B,WAAvB,GAAqC,UAAUC,IAAV,EAAgBC,QAAhB,EAA0BC,WAA1B,EAAuC;AACxE,QAAIC,OAAO,IAAX;AACAH,WAAOlF,OAAOC,MAAP,CAAc,EAAd,EAAkBoF,KAAKpD,OAAL,CAAaqD,eAA/B,EAAgDJ,IAAhD,CAAP,CAFwE,CAEV;AAC9D,QAAIK,eAAevF,OAAOC,MAAP,CAAc,EAAd,EAAkBiF,IAAlB,CAAnB,CAHwE,CAG5B;;AAE5C,QAAI,KAAKhB,YAAL,MAAuBkB,WAA3B,EAAwC;AACpCF,aAAKlE,GAAL,IAAYuD,OAAOW,KAAKX,MAAZ,CAAZ;AACAW,aAAKM,OAAL,GAAeN,KAAKM,OAAL,IAAgB,EAA/B;AACA,YAAI,CAACJ,WAAL,EAAkB;AACdF,iBAAKM,OAAL,CAAa,eAAb,IAAgC,KAAKpC,QAAL,GAAgB,GAAhB,GAAsB,KAAKe,QAAL,EAAtD;AACH;AACD,YAAI,CAACgB,QAAL,EAAe;AACX,mBAAOE,KAAK/B,cAAL,CAAoB4B,IAApB,CAAP;AACH,SAFD,MAEO;AACH,gBAAIO,KAAJ;AACA,gBAAIC,QAAQ,SAARA,KAAQ,GAAY;AACpBL,qBAAKJ,WAAL,CAAiBM,YAAjB,EAA+BF,KAAKM,YAAL,CAAkBR,QAAlB,EAA4BO,KAA5B,EAAmCD,KAAnC,CAA/B;AACH,aAFD;AAGA,gBAAIJ,KAAKO,UAAT,EAAqB;AACjBH,wBAAQJ,KAAKO,UAAL,EAAR;AACH;;AAED,mBAAOP,KAAK/B,cAAL,CAAoB4B,IAApB,EAA0BG,KAAKM,YAAL,CAAkBR,QAAlB,EAA4BO,KAA5B,EAAmCD,KAAnC,CAA1B,CAAP;AACH;AACJ,KAnBD,MAmBO;AACHN,iBAASU,IAAT,CAAc,IAAd,EAAoB,IAAIlG,KAAJ,CAAU,gBAAV,CAApB,EAAiD;AAC7CE,wBAAY;AADiC,SAAjD,EAEG,IAFH;AAGH;AAEJ,CA9BD;;AAgCAqD,uBAAuByC,YAAvB,GAAsC,UAAUR,QAAV,EAAoBO,KAApB,EAA2BD,KAA3B,EAAkC;AACpE,QAAIJ,OAAO,IAAX;AACA,WAAO,UAAU3F,KAAV,EAAiBoG,QAAjB,EAA2BC,IAA3B,EAAiC;AACpC;AACA,YAAI,CAACrG,KAAD,IAAUoG,SAASjG,UAAT,IAAuB,GAAjC,IAAwCiG,SAASjG,UAAT,GAAsB,GAAlE,EAAuE;AACnEH,oBAAQ,IAAIC,KAAJ,CAAUoG,IAAV,CAAR;AACH;AACD,YAAI;AACA;AACAA,mBAAOC,KAAKC,KAAL,CAAWF,IAAX,CAAP;AACH,SAHD,CAGE,OAAOG,CAAP,EAAU,CAAE;;AAEd,YAAIJ,QAAJ,EAAc;AACV,gBAAIK,aAAaL,SAASN,OAAT,CAAiB,aAAjB,CAAjB;AACA,gBAAIY,cAAcN,SAASN,OAAT,CAAiB,sBAAjB,CAAlB;AACA;AACAW,yBAAa,OAAOA,UAAP,KAAsB,OAAtB,GAAgCA,WAAW,CAAX,CAAhC,GAAgDA,UAA7D;AACAC,0BAAc,OAAOA,WAAP,KAAuB,OAAvB,GAAiCA,YAAY,CAAZ,CAAjC,GAAkDA,WAAhE;AACH;;AAED,YACIN,YACAT,KAAKpD,OAAL,CAAaoE,WADb,IAEAP,SAASjG,UAAT,KAAwB,GAFxB,IAGAsG,UAJJ,EAKE;AACE,gBAAIC,gBAAgB,4BAApB,EAAkD;AAC9C;AACAlF,2BAAWA,QAAQC,IAAR,CAAa,8BAAb,CAAX;AACAkE,qBAAK7B,KAAL,CAAWG,QAAX,GAAsB,OAAO,CAAC,CAAEwC,UAAhC;AACAG,2BAAW,YAAY;AACnBjB,yBAAK7B,KAAL,CAAWG,QAAX,GAAsB,CAAtB;AACA+B;AAEH,iBAJD,EAIGL,KAAK7B,KAAL,CAAWG,QAJd;AAMH;AACD,gBAAIyC,gBAAgB,6BAApB,EAAmD;AAC/C1G,sBAAM6G,IAAN,GAAa,IAAb;AACApB,yBAASU,IAAT,CAAc,IAAd,EAAoBnG,KAApB,EAA2BoG,QAA3B,EAAqCC,IAArC;AACH;AAEJ,SAtBD,MAsBO;;AAEH,gBACID;AACA;AACA;AACAT,iBAAKpD,OAAL,CAAauE,cAHb,KAKIV,SAASjG,UAAT,KAAwB,GAAxB,IAEIiG,SAASjG,UAAT,KAAwB,GAAxB,IACAuG,gBAAgB,4BARxB,CADJ,EAYE;AACEf,qBAAKoB,IAAL,CAAUnC,SAAV;AACAe,qBAAKpD,OAAL,CAAauE,cAAb;AACH;AACD,gBAAInB,KAAKqB,QAAT,EAAmB;AACfrB,qBAAKqB,QAAL,CAAcjB,KAAd;AACH;AACDN,qBAASU,IAAT,CAAc,IAAd,EAAoBnG,KAApB,EAA2BoG,QAA3B,EAAqCC,IAArC;AACH;AACJ,KA/DD;AAgEH,CAlED;;AAoEA7C,uBAAuByD,yBAAvB,GAAmD,UAAUzB,IAAV,EAAgB;AAC/D,QAAIG,OAAO,IAAX;AACA,WAAO,IAAIuB,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AACxC,YAAIC,kBAAkB,SAAlBA,eAAkB,GAAY;;AAE9B,gBAAI;AACA,oBAAIC,MAAM3B,KAAKJ,WAAL,CAAiBC,IAAjB,CAAV;AACA2B,wBAAQG,GAAR;AACH,aAHD,CAGE,OAAOtH,KAAP,EAAc;AACZoH,uBAAO7D,SAAS;AACZvD,2BAAOA;AADK,iBAAT,CAAP;AAGH;AACJ,SAVD;;AAYA,YAAI,CAAC,KAAKuC,OAAL,CAAaoE,WAAlB,EAA+B;AAC3BU;AACH,SAFD,MAEO;AACH;AACA,iBAAKnD,KAAL,CAAWe,IAAX,CAAgBoC,eAAhB;AACA;AACAE,yBAAa,KAAKzD,KAAL,CAAW0D,EAAxB;AACA;AACA,iBAAKrD,YAAL;AACH;AACJ,KAvBM,CAAP;AAwBH,CA1BD;;AA4BAX,uBAAuBiE,cAAvB,GAAwC,UAAUjC,IAAV,EAAgB5B,cAAhB,EAAgC8B,WAAhC,EAA6C;AACjF,QAAIC,OAAO,IAAX;AACA,WAAO,IAAIuB,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AACxC,YAAIC,kBAAkB,SAAlBA,eAAkB,GAAY;AAC9B,gBAAI;AACA,oBAAIC,MAAM3B,KAAKJ,WAAL,CAAiBC,IAAjB,EAAuB,UAAUxF,KAAV,EAAiBoG,QAAjB,EAA2BC,IAA3B,EAAiC;AAC9D,wBAAIrG,KAAJ,EAAW;AACPoH,+BAAO7D,SAAS;AACZvD,mCAAOA,KADK;AAEZoG,sCAAUA,QAFE;AAGZC,kCAAMA;AAHM,yBAAT,CAAP;AAKH,qBAND,MAMO;AACHc,gCAAQ;AACJf,sCAAUA,QADN;AAEJC,kCAAMA;AAFF,yBAAR;AAIH;AACJ,iBAbS,EAaPX,WAbO,CAAV;AAcA9B,kCAAkBA,eAAe0D,GAAf,CAAlB;AACH,aAhBD,CAgBE,OAAOtH,KAAP,EAAc;AACZoH,uBAAO7D,SAAS;AACZvD,2BAAOA;AADK,iBAAT,CAAP;AAGH;AACJ,SAtBD;AAuBA,YAAI,CAAC2F,KAAKpD,OAAL,CAAaoE,WAAlB,EAA+B;AAC3BU;AACH,SAFD,MAEO;AACH;AACA1B,iBAAKzB,KAAL,CAAWe,IAAX,CAAgBoC,eAAhB;AACA;AACAE,yBAAa5B,KAAK7B,KAAL,CAAW0D,EAAxB;AACA;AACA7B,iBAAKxB,YAAL;AACH;AACJ,KAlCM,CAAP;AAmCH,CArCD;;AAuCAX,uBAAuBkE,WAAvB,GAAqC,UAAUC,QAAV,EAAoBC,OAApB,EAA6B;AAC9D,SAAK1B,UAAL,GAAkByB,QAAlB;AACA,SAAKX,QAAL,GAAgBY,OAAhB;AACH,CAHD;;AAKA;AACA,SAASxD,UAAT,GAAsB;AAClB,QAAI,KAAKF,KAAL,CAAWgB,MAAf,EAAuB;AACnB,YAAI2C,cAAcC,eAAe,KAAKhE,KAApB,EAA2B,KAAKvB,OAAL,CAAawF,GAAxC,CAAlB;AACA,YAAIF,gBAAgB,CAApB,EAAuB;AACnB,gBAAIR,kBAAkB,KAAKnD,KAAL,CAAW8D,KAAX,EAAtB;AACAX;AACA,iBAAKvD,KAAL,CAAWE,KAAX;AACH;AACD,aAAKF,KAAL,CAAW0D,EAAX,GAAgBZ,WAAW,KAAKzC,YAAhB,EAA8B0D,WAA9B,CAAhB;AACH;AAEJ;;AAED,SAASC,cAAT,CAAwBhE,KAAxB,EAA+BiE,GAA/B,EAAoC;AAChC,QAAIE,MAAMC,KAAKD,GAAL,EAAV;AACA,QAAIE,OAAOF,MAAMnE,MAAMC,gBAAvB;AACA;AACA,QAAID,MAAMG,QAAV,EAAoB;AAChBH,cAAMC,gBAAN,GAAyBkE,MAAMnE,MAAMG,QAArC;AACA,eAAOH,MAAMG,QAAN,GAAiB,CAAxB;AACH;AACD;AACA,QAAIkE,OAAO,IAAX,EAAiB;AACbrE,cAAMC,gBAAN,GAAyBkE,GAAzB;AACAnE,cAAME,KAAN,GAAc,CAAd;AACA,eAAO,CAAP;AACH;AACD;AACA,QAAIF,MAAME,KAAN,GAAc+D,GAAlB,EAAuB;AACnB,eAAO,CAAP;AACH;AACD;AACA,WAAO,OAAOI,IAAd;AACH,C;;;;;;;;;;;AC1RD,IAAMrI,QAAO,mBAAAD,CAAQ,CAAR,CAAb;;AAEA;AACA,IAAIuI,QAAQ;AACR,WAAO,CADC;AAER,eAAW,CAFH;AAGR,oBAAgB;AAHR,CAAZ;;AAMA,IAAIC,eAAe,6BAAnB;;AAEA,SAASC,WAAT,CAAqBxD,GAArB,EAA0B;AACtB,QAAIyD,MAAJ;AACA,SAAK,IAAIC,CAAT,IAAc1D,GAAd,EAAmB;AACf,YAAIsD,MAAMI,CAAN,CAAJ,EAAc;AACV,mBAAO1D,IAAI0D,CAAJ,CAAP;AACH;AACD,YAAI,QAAO1D,IAAI0D,CAAJ,CAAP,MAAkB,QAAtB,EAAgC;AAC5BD,qBAASD,YAAYxD,IAAI0D,CAAJ,CAAZ,CAAT;AACA,gBAAID,MAAJ,EAAY;AACR,uBAAOA,MAAP;AACH;AACJ;AACJ;AACJ;AACD;AACA,SAASE,oBAAT,CAA8BC,IAA9B,EAAoCvI,UAApC,EAAgD;AAC5C,QAAIwI,IAAJ;AACA,QAAI,OAAOD,IAAP,KAAgB,QAApB,EAA8B;AAC1B,YAAI;AACAC,mBAAOL,YAAYhC,KAAKC,KAAL,CAAWmC,IAAX,CAAZ,CAAP;AACA,gBAAI,CAACC,IAAL,EAAW;AACP;AACAA,uBAAOD,IAAP;AACH;AACJ,SAND,CAME,OAAOlC,CAAP,EAAU;AACRmC,mBAAOD,OAAOA,KAAK9H,OAAL,CAAayH,YAAb,EAA2B,IAA3B,CAAP,GAA0C,eAAjD;AACH;AACD,YAAIlI,eAAe,GAAf,IAAsBuI,KAAKxD,MAAL,GAAc,GAAxC,EAA6C;AACzC;AACAyD,mBAAO,WAAP;AACH;AACJ,KAdD,MAcO;AACHA,eAAOL,YAAYI,IAAZ,CAAP;AACH;AACD,WAAOC,IAAP;AACH;;AAEDjJ,OAAOC,OAAP,GAAiB,UAAU4I,MAAV,EAAkB;AAC/B,QAAIvI,KAAJ,EAAW4I,IAAX;AACA,QAAIL,OAAOnC,QAAX,EAAqB;AACjBwC,eAAO,CAAC,CAAGL,OAAOnC,QAAP,CAAgBjG,UAA3B;AACAH,gBAAQF,MAAM;AACVK,wBAAYyI,IADF;AAEV1I,qBAAS,KAAGuI,qBAAqBF,OAAOlC,IAAP,IAAakC,OAAOvI,KAAP,CAAaE,OAA/C,EAAwD0I,IAAxD,CAFF;AAGVxC,sBAAUmC,OAAOnC,QAHP;AAIVC,kBAAMkC,OAAOlC;AAJH,SAAN,EAKLkC,OAAOvI,KALF,CAAR;AAMH,KARD,MAQO;AACHA,gBAAQF,MAAM;AACVK,wBAAY;AADF,SAAN,EAELoI,OAAOvI,KAFF,CAAR;AAGH;AACD,WAAOA,KAAP;AACH,CAhBD,C;;;;;;;;;AChDA,IAAMF,QAAQ,mBAAAD,CAAQ,CAAR,CAAd;;AAEA;AACA;AACA,IAAMgJ,mBAAmB;AACrB;AACA,mBAAAhJ,CAAQ,CAAR,CAFqB,EAGrB,mBAAAA,CAAQ,CAAR,CAHqB,EAIrB,mBAAAA,CAAQ,EAAR,CAJqB,CAAzB;;AAOAH,OAAOC,OAAP,GAAiB;AACbwC,aADa,qBACHC,KADG,EACI;AACb,eAAO,UAACoD,IAAD,EAAU;AACbA,mBAAOqD,iBAAiBC,MAAjB,CAAwB,UAACC,YAAD,EAAeC,SAAf,EAA6B;AACxD,oBAAIA,UAAUtI,IAAV,IAAkB0B,KAAtB,EAA6B;AACzB,wBAAM6G,cAAcD,UAAUE,OAAV,CAAkBH,YAAlB,EAAgC3G,KAAhC,CAApB;AACA,wBAAI,CAAC6G,WAAL,EAAkB;AACd,8BAAMnJ,MAAM;AACRI,yDAA2B8I,UAAUtI,IAArC;AADQ,yBAAN,CAAN;AAGH;AACD,2BAAOuI,WAAP;AACH,iBARD,MAQO;AACH,2BAAOF,YAAP;AACH;AACJ,aAZM,EAYJvD,IAZI,CAAP;AAaA,mBAAOA,IAAP;AACH,SAfD;AAgBH;AAlBY,CAAjB,C;;;;;;;;;ACXA9F,OAAOC,OAAP,GAAiB;AACbe,UAAM,kBADO;AAEbwI,WAFa,mBAEL1D,IAFK,EAECpD,KAFD,EAEO;AAChB,eAAO9B,OAAOC,MAAP,CAAciF,IAAd,EAAoBpD,MAAM+G,gBAA1B,CAAP;AACH;AAJY,CAAjB,C;;;;;;;;;ACAAzJ,OAAOC,OAAP,GAAiB;AACbe,UAAM,aADO;AAEbwI,WAFa,mBAEL1D,IAFK,EAECpD,KAFD,EAEO;AAChB9B,eAAOC,MAAP,CAAciF,KAAKX,MAAnB,EAA2BzC,MAAMgH,WAAjC;AACA,eAAO5D,IAAP;AACH;AALY,CAAjB,C;;;;;;;;;ACAA9F,OAAOC,OAAP,GAAiB;AACbe,UAAM,YADO;AAEbwI,WAFa,mBAEL1D,IAFK,EAECpD,KAFD,EAEO;AAChB,eAAOA,MAAMiH,UAAN,CAAiB7D,IAAjB,EAAuBpD,KAAvB,CAAP;AACH;AAJY,CAAjB,C;;;;;;;;;ACAA,IAAMtC,QAAQ,mBAAAD,CAAQ,CAAR,CAAd;AACA,IAAMD,UAAU,mBAAAC,CAAQ,CAAR,CAAhB;;AAGAH,OAAOC,OAAP,GAAiB;AACb0C,WADa,mBACLiH,aADK,EACUtH,UADV,EACsB;AAC/B,YAAII,QAAQ9B,OAAOC,MAAP,CAAc,EAAd,EAAkB+I,aAAlB,CAAZ;AACA,YAAItH,WAAWuH,QAAf,EAAyB;AACrBvH,uBAAWuH,QAAX,CAAoBtG,OAApB,CAA4B,eAAO;AAC/B,oBAAIb,MAAMoH,GAAN,MAAeC,SAAnB,EAA8B;AAC1B,0BAAM3J,MAAM;AACRI,qDAA2BsJ,GAA3B,oBADQ;AAERnJ,8BAASmJ,GAAT;AAFQ,qBAAN,CAAN;AAIH;AACJ,aAPD;AAQH;AACD,YAAIxH,WAAW0H,QAAf,EAAyB;AACrB1H,uBAAW0H,QAAX,CAAoBzG,OAApB,CAA4B,eAAO;AAC/B,oBAAIuG,OAAOpH,KAAP,IAAgBA,MAAMoH,GAAN,MAAeC,SAAnC,EAA8C;AAC1C7J,4BAAQQ,aAAR,CAAyBoJ,GAAzB;AACH;AACJ,aAJD;AAKH;AACD,YAAIxH,WAAW2H,gBAAf,EAAiC;AAC7B,gBAAI,EAAEvH,MAAMwH,MAAN,IAAgBxH,MAAMyH,QAAtB,IAAkCzH,MAAMtB,IAA1C,CAAJ,EAAqD;AACjD,sBAAMhB,MAAM;AACRI,mHADQ;AAERG;AAFQ,iBAAN,CAAN;AAIH,aALD,MAKO;AACH+B,wBAAQ0H,qBAAqB1H,KAArB,CAAR;AACH;AACJ;AACD,eAAOA,KAAP;AACH;AA/BY,CAAjB;;AAkCA,IAAM2H,SAAS,gBAAf;AACA,SAASC,iBAAT,CAA2BR,GAA3B,EAAgCS,EAAhC,EAAmC;AAC/B,QAAG,CAACF,OAAOpJ,IAAP,CAAYsJ,EAAZ,CAAJ,EAAoB;AAChB,cAAMnK,MAAM;AACRI,iEAAmDsJ,GAAnD,sDADQ;AAERnJ,kBAASmJ,GAAT,iCAAwCO,OAAOG,QAAP;AAFhC,SAAN,CAAN;AAIH;AACJ;;AAED,SAASJ,oBAAT,CAA8B1H,KAA9B,EAAoC;AAChC,QAAGA,MAAMwH,MAAT,EAAgB;AACZI,0BAAkB,QAAlB,EAA4B5H,MAAMwH,MAAlC;AACAxH,cAAM+H,YAAN,GAAqB,eAAa/H,MAAMwH,MAAxC;AACA,eAAOxH,KAAP;AACH;AACD,QAAGA,MAAMyH,QAAT,EAAkB;AACdG,0BAAkB,UAAlB,EAA8B5H,MAAMyH,QAApC;AACAzH,cAAM+H,YAAN,GAAqB,eAAa/H,MAAMyH,QAAxC;AACA,eAAOzH,KAAP;AACH;AACD,QAAGA,MAAMtB,IAAT,EAAc;AACVsB,cAAM+H,YAAN,GAAqBvK,QAAQiB,oBAAR,CAA6BuB,MAAMtB,IAAnC,CAArB;AACA,eAAOsB,KAAP;AACH;AACJ,C;;;;;;;;;AC/DD,IAAMgI,YAAY,mBAAAvK,CAAQ,CAAR,CAAlB;;AAEAH,OAAOC,OAAP,GAAiB;AACbwD,QADa,gBACRV,IADQ,EACF;AACP,YAAMO,gBAAgBP,KAAKM,CAAL,CAAOC,aAA7B;AACAqH,kBAAU;AACNC,yBAAatH,cAAc,EAAd,EAAkB,UAACd,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AACvD,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAIhF,OAAO;AACPiF,gCAAQ,KADD;AAEPnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUM,QAA1C;AAFE,qBAAX;AAIA,2BAAOxI,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBAPE,EAQFgF,IARE,CAQG;AAAA,2BAAUjC,OAAOlC,IAAjB;AAAA,iBARH,CAAP;AASH,aAVY,CADP;AAYN7B,0BAAcxB,cAAc,EAAd,EAAkB,UAACd,KAAD;AAAA,uBAC5BA,MAAMM,aAAN,CAAoBgC,YAApB,EAD4B;AAAA,aAAlB;;AAZR,SAAV;;AAkBA/B,aAAKI,GAAL,CAASkE,IAAT,GAAgBsD,OAAhB;AACA,eAAOA,OAAP;AACH;AAvBY,CAAjB,C;;;;;;;;;ACFA,IAAMD,YAAY,mBAAAvK,CAAQ,CAAR,CAAlB;;AAEAH,OAAOC,OAAP,GAAiB;AACbwD,QADa,gBACRV,IADQ,EACF;AACP,YAAMO,gBAAgBP,KAAKM,CAAL,CAAOC,aAA7B;AACA,YAAM2H,QAAQ;AACVC,iBAAK5H,cAAc;AACf2G,kCAAkB,IADH;AAEfD,0BAAU,CAAC,gBAAD;AAFK,aAAd,EAGF,UAACxH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAMhF,OAAO;AACTiF,gCAAQ,KADC;AAETnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUS,MAAV,GAAmBzI,MAAM+H,YAAzD;AAFI,qBAAb;;AAKA,wBAAI/H,MAAM0I,cAAV,EAA0B;AACtBtF,6BAAKX,MAAL,GAAc;AACV,wCAAYzC,MAAM0I;AADR,yBAAd;AAGH;;AAED,2BAAO5I,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBAdE,EAeFgF,IAfE,CAeG;AAAA,2BAAUjC,OAAOlC,IAAjB;AAAA,iBAfH,CAAP;AAgBH,aApBI,CADK;AAsBV0E,oBAAQ/H,cAAc;AAClB2G,kCAAkB;AADA,aAAd,EAEL,UAACzH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAMhF,OAAO;AACTiF,gCAAQ,KADC;AAETnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUS,MAAV,GAAmBzI,MAAM+H,YAAzD;AAFI,qBAAb;;AAKA,2BAAOjI,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBARE,EASFgF,IATE,CAUC;AAAA,2BAAWjC,OAAOnC,QAAP,CAAgBjG,UAAhB,IAA8B,GAAzC;AAAA,iBAVD,EAUgD;AAC/C,kCAAU;AAAE;AACR,wBAAIoI,OAAOnC,QAAP,IAAmBmC,OAAOnC,QAAP,CAAgBjG,UAAhB,IAA8B,GAArD,EAA0D;AACtD,+BAAO,KAAP;AACH,qBAFD,MAEO;AACH,8BAAMoI,MAAN;AACH;AACJ,iBAjBF,CAAP;AAmBH,aAtBO,CAtBE;AA6CVyC,qBAAShI,cAAc;AACnB2G,kCAAkB;AADC,aAAd,EAEN,UAACzH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAMhF,OAAO;AACTiF,gCAAQ,KADC;AAETnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUS,MAAV,GAAmBzI,MAAM+H,YAAzB,GAAwC,UAAxE;AAFI,qBAAb;;AAKA,2BAAOjI,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBARE,EASFgF,IATE,CASG;AAAA,2BAAUjC,OAAOlC,IAAjB;AAAA,iBATH,CAAP;AAWH,aAdQ,CA7CC;AA4DV4E,0BAAcjI,cAAc;AACxB2G,kCAAkB;AADM,aAAd,EAEX,UAACzH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAMhF,OAAO;AACTiF,gCAAQ,MADC;AAETnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUS,MAAV,GAAmBzI,MAAM+H,YAAzD,CAFI;AAGTe,8BAAM;AACF,sCAAU;AADR;AAHG,qBAAb;AAOA,2BAAOhJ,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBAVE,EAWFgF,IAXE,CAWG;AAAA,2BAAUjC,OAAOlC,IAAjB;AAAA,iBAXH,CAAP,CAD2B,CAYO;AAErC,aAhBa,CA5DJ;AA6EV;AACA8E,kBAAMnI,cAAc;AAChB2G,kCAAkB,IADF;AAEhBJ,0BAAU,CAAC,aAAD;AAFM,aAAd,EAGH6B,SAAS/G,IAAT,CAAc,IAAd,EAAoB,MAApB,CAHG,CA9EI;AAkFVgH,kBAAMrI,cAAc;AAChB2G,kCAAkB,IADF;AAEhBJ,0BAAU,CAAC,aAAD;AAFM,aAAd,EAGH6B,SAAS/G,IAAT,CAAc,IAAd,EAAoB,MAApB,CAHG,CAlFI;AAsFViH,oBAAQtI,cAAc;AAClB2G,kCAAkB,IADA;AAElBD,0BAAU,CAAC,gBAAD;AAFQ,aAAd,EAGL,UAACxH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAMhF,OAAO;AACTiF,gCAAQ,QADC;AAETnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUS,MAAV,GAAmBzI,MAAM+H,YAAzD;AAFI,qBAAb;AAIA,wBAAI/H,MAAM0I,cAAV,EAA0B;AACtBtF,6BAAKX,MAAL,GAAc;AACV,wCAAYiG;AADF,yBAAd;AAGH;AACD,2BAAO5I,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBAZE,EAaFgF,IAbE,CAaG;AAAA,2BAAUjC,OAAOnC,QAAP,CAAgBjG,UAA1B;AAAA,iBAbH,CAAP,CAD2B,CAcsB;AAEpD,aAnBO;AAtFE,SAAd;;AA4GAsC,aAAKI,GAAL,CAAS0I,OAAT,GAAmBZ,KAAnB;AACA,eAAOA,KAAP;AACH;AAjHY,CAAjB;;AAqHA,SAASS,QAAT,CAAkBI,MAAlB,EAA0BtJ,KAA1B,EAAiCqI,QAAjC,EAA2CnI,KAA3C,EAAkD;AAC9C,WAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,YAAMiB,UAAUvJ,MAAMtC,OAAN,CAAca,cAAd,CAA6B2B,MAAMsJ,WAAnC,CAAhB;AACA,YAAMlG,OAAO;AACTiF,oBAAQ,MADC;AAETnJ,iBAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUS,MAAV,GAAmBzI,MAAM+H,YAAzD,CAFI;AAGTe,kBAAM;AACF,0BAAUM,MADR;AAEF,+BAAeC;AAFb;AAHG,SAAb;AAQA,eAAOvJ,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,KAZE,EAaFgF,IAbE,CAaG;AAAA,eAAUjC,OAAOlC,IAAjB;AAAA,KAbH,CAAP,CAD8C,CAcZ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,C;;;;;;;;;AC9ID,IAAM+D,YAAY,mBAAAvK,CAAQ,CAAR,CAAlB;;AAEAH,OAAOC,OAAP,GAAiB;AACbwD,QADa,gBACRV,IADQ,EACF;AACP,YAAMO,gBAAgBP,KAAKM,CAAL,CAAOC,aAA7B;AACA,YAAM2I,eAAe;AACjBC,sBAAU5I,cAAc;AACpB2G,kCAAkB,IADE;AAEpBD,0BAAU,CAAC,gBAAD,EAAmB,UAAnB;AAFU,aAAd,EAGP,UAACxH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAMhF,OAAO;AACTiF,gCAAQ,KADC;AAETnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUyB,SAAV,GAAsBzJ,MAAM+H,YAA5D;AAFI,qBAAb;AAIA,wBAAI/H,MAAM0I,cAAV,EAA0B;AACtBtF,6BAAKX,MAAL,GAAc;AACV,wCAAYzC,MAAM0I;AADR,yBAAd;AAGH;;AAED,wBAAI1I,MAAM0J,QAAV,EAAoB;AAChBtG,6BAAKuG,YAAL,GAAoB,aAApB;AACH;;AAED,2BAAO7J,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBAjBE,EAkBFgF,IAlBE,CAkBG;AAAA,2BAAUjC,OAAOnC,QAAjB;AAAA,iBAlBH,CAAP;AAmBH,aAvBS,CADO;AAyBjB4F,uBAAWhJ,cAAc;AACrB2G,kCAAkB,IADG;AAErBJ,0BAAU,CAAC,MAAD,CAFW;AAGrBG,0BAAU,CAAC,UAAD;AAHW,aAAd,EAIR,UAACxH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;;AAER,wBAAMhF,OAAO;AACTiF,gCAAQ,MADC;AAETnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUyB,SAAV,GAAsBzJ,MAAM+H,YAA5D,CAFI;AAGT9D,8BAAMjE,MAAM6J;AAHH,qBAAb;;AAMAzG,yBAAKM,OAAL,GAAe,EAAf;AACA,wBAAI1D,MAAM8J,QAAV,EAAoB;AAChB1G,6BAAKM,OAAL,CAAa,cAAb,IAA+B1D,MAAM8J,QAArC;AACH;;AAED,2BAAOhK,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBAfE,EAgBFgF,IAhBE,CAgBG,kBAAU;AACZjC,2BAAOlC,IAAP,CAAY4D,EAAZ,GAAiB1B,OAAOnC,QAAP,CAAgBN,OAAhB,CAAwB,MAAxB,CAAjB,CADY,CACqC;AACjD,2BAAOyC,OAAOlC,IAAd;AACH,iBAnBE,CAAP;AAoBH,aAzBU,CAzBM;AAmDjB;AACA8F,gCAAoBnJ,cAAc;AAC9B2G,kCAAkB,IADY;AAE9BJ,0BAAU,CAAC,MAAD;AAFoB,aAAd,EAGjB,UAACrH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAI,CAAC4B,OAAOC,QAAZ,EAAsB;AAClB,8BAAM,IAAIpM,KAAJ,CAAU,qBAAV,CAAN;AACH;AACD,wBAAIgM,OAAOK,UAAX;AACA,wBAAIC,WAAW,IAAIH,OAAOC,QAAX,EAAf;AACAE,6BAASC,MAAT,CAAgB,MAAhB,EAAwBP,IAAxB;AACA9B,mCAAevK,QAAQa,cAAR,CAAuB0J,YAAvB,KAAwC,EAAvD;AACA,wBAAI3E,OAAO;AACPiF,gCAAQ,MADD;AAEPnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUyB,SAAV,GAAsBzJ,MAAM+H,YAA5D,CAFE;AAGP9D,8BAAMkG;AAHC,qBAAX;AAKA,2BAAOrK,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBAfE,EAgBFgF,IAhBE,CAgBG,kBAAU;AACZjC,2BAAOlC,IAAP,CAAY4D,EAAZ,GAAiB1B,OAAOnC,QAAP,CAAgBN,OAAhB,CAAwB,MAAxB,CAAjB,CADY,CACqC;AACjD,2BAAOyC,OAAOlC,IAAd;AACH,iBAnBE,CAAP;AAoBH,aAxBmB;;AApDH,SAArB;;AAgFA5D,aAAKI,GAAL,CAAS0I,OAAT,GAAmBjL,OAAOC,MAAP,CAAckC,KAAKI,GAAL,CAAS0I,OAAvB,EAAgCI,YAAhC,CAAnB;AACA,eAAOA,YAAP;AACH;AArFY,CAAjB,C;;;;;;;;;ACFA,IAAMc,kBAAkB,mBAAA5M,CAAQ,CAAR,EAAuB6M,KAA/C;;AAEAhN,OAAOC,OAAP,GAAiB;AACbwD,QADa,gBACRV,IADQ,EACF;AACP,YAAMO,gBAAgBP,KAAKM,CAAL,CAAOC,aAA7B;AACA,YAAM2J,WAAW;AACbC,wBAAY5J,cAAc;AACtBuG,0BAAU,CAAC,MAAD,EAAS,WAAT,CADY;AAEtBI,kCAAkB;AAFI,aAAd,EAGT,UAACzH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,oBAAMyK,YAAYzK,MAAMyK,SAAxB;AACA,oBAAMC,WAAW;AACbhM,0BAAM,IADO;AAEbiM,0BAAM,MAFO;AAGbC,mCAAe;AAHF,iBAAjB;AAKA,uBAAO9F,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAMyC,QAAQ3M,OAAOC,MAAP,CAAcuM,QAAd,EAAwBD,SAAxB,EAAmC;AAC7C/L,8BAAMsB,MAAM+H;AADiC,qBAAnC,CAAd;AAGA;;AAEA,2BAAOjI,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS;AAC/CE,gCAAQ,MADuC;AAE/CnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,KAAoCsH,eAFM;AAG/CvB,8BAAM+B;AAHyC,qBAAT,CAAnC,CAAP;AAKH,iBAZE,EAYAzC,IAZA,CAYK,UAAUjC,MAAV,EAAkB;AAAE;AACxB,2BAAOA,OAAOlC,IAAd;AACH,iBAdE,CAAP;AAeH,aAzBW,CADC;AA2Bb6G,wBAAYlK,cAAc;AACtBuG,0BAAU,CAAC,IAAD;AADY,aAAd,EAET,UAACrH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAOF,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS;AAC/CE,4BAAQ,QADuC;AAE/CnJ,yBAAKY,MAAMM,aAAN,CAAoB2C,WAApB,KAAoCsH,eAApC,GAAsD,GAAtD,GAA4DrK,MAAM6H;AAFxB,iBAAT,CAAnC,EAGHO,IAHG,CAGE,UAAUjC,MAAV,EAAkB;AAAE;AACzB,2BAAOA,OAAOnC,QAAP,CAAgBjG,UAAvB;AACH,iBALM,CAAP;AAMH,aATW,CA3BC;AAqCbgN,sBAAUnK,cAAc;AACpBuG,0BAAU,CAAC,IAAD;AADU,aAAd,EAEP,UAACrH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAOF,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS;AAC/CE,4BAAQ,KADuC;AAE/CnJ,yBAAKY,MAAMM,aAAN,CAAoB2C,WAApB,KAAoCsH,eAApC,GAAsD,GAAtD,GAA4DrK,MAAM6H;AAFxB,iBAAT,CAAnC,EAGHO,IAHG,CAGE,UAAUjC,MAAV,EAAkB;AAAE;AACzB,2BAAOA,OAAOlC,IAAd;AACH,iBALM,CAAP;AAMH,aATS,CArCG;AA+Cb+G,uBAAWpK,cAAc;AACrBuG,0BAAU,CAAC,SAAD;AADW,aAAd,EAER,UAACrH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,oBAAMiL,UAAUjL,MAAMiL,OAAtB;AACA,uBAAOnG,QAAQC,OAAR,GACFqD,IADE,CACG,YAAY;AACd6C,4BAAQvM,IAAR,GAAeuM,QAAQvM,IAAR,IAAgBoB,MAAMtC,OAAN,CAAca,cAAd,CAA6B4M,QAAQvM,IAArC,CAA/B;;AAEA,2BAAOoB,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS;AAC/CE,gCAAQ,KADuC;AAE/CnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,KAAoCsH,eAFM;AAG/C5H,gCAAQwI;AAHuC,qBAAT,CAAnC,CAAP;AAKH,iBATE,EASA7C,IATA,CASK,UAAUjC,MAAV,EAAkB;AAAE;AACxB,2BAAOA,OAAOlC,IAAd;AACH,iBAXE,CAAP;AAYH,aAhBU,CA/CE;AAgEbiH,qBAAStK,cAAc;AACnBuG,0BAAU,CAAC,SAAD;AADS,aAAd,EAEN,UAACrH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAOuK,SAASS,SAAT,CAAmBhL,KAAnB,EAA0BoI,IAA1B,CAA+B,UAAU+C,IAAV,EAAgB;AAClD,wBAAIA,KAAKC,GAAL,IAAYD,KAAKC,GAAL,CAAStI,MAAT,GAAkB,CAAlC,EAAqC;AACjC,+BAAOyH,SAASQ,QAAT,CAAkB;AACrBlD,gCAAIsD,KAAKC,GAAL,CAAS,CAAT;AADiB,yBAAlB,CAAP;AAGH,qBAJD,MAIO;AACH,+BAAO,IAAP;AACH;AACJ,iBARM,CAAP;AASH,aAZQ;AAhEI,SAAjB;;AA+EA/K,aAAKI,GAAL,CAAS4K,IAAT,GAAgBd,QAAhB;AACA,eAAOA,QAAP;AACH;AApFY,CAAjB,C;;;;;;;;;ACFA,IAAMvC,YAAY,mBAAAvK,CAAQ,CAAR,CAAlB;;AAEAH,OAAOC,OAAP,GAAiB;AACbwD,QADa,gBACRV,IADQ,EACF;AACP,YAAMO,gBAAgBP,KAAKM,CAAL,CAAOC,aAA7B;AACA0K,mBAAW;AACPC,qBAAS3K,cAAc;AACnB2G,kCAAkB,KADC;AAEnBJ,0BAAU,CAAC,IAAD;AAFS,aAAd,EAGN,UAACrH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAIhF,OAAO;AACPiF,gCAAQ,KADD;AAEPnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUwD,KAAV,GAAkBxL,MAAM6H,EAAxD;AAFE,qBAAX;;AAKA,2BAAO/H,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBARE,EASFgF,IATE,CASG;AAAA,2BAAUjC,OAAOlC,IAAjB;AAAA,iBATH,CAAP;AAUH,aAdQ,CADF;AAgBPwH,uBAAW7K,cAAc;AACrB2G,kCAAkB,KADG;AAErBJ,0BAAU,CAAC,MAAD;AAFW,aAAd,EAGR,UAACrH,KAAD,EAAQqI,QAAR,EAAkBnI,KAAlB,EAA4B;AAC3B,uBAAO8E,QAAQC,OAAR,GACFqD,IADE,CACG,YAAM;AACR,wBAAIhF,OAAO;AACPiF,gCAAQ,KADD;AAEPnJ,6BAAKY,MAAMM,aAAN,CAAoB2C,WAApB,CAAgCiF,UAAUwD,KAA1C,CAFE;AAGP/I,gCAAQ;AACJiJ,oCAAQ,mBAAmB1L,MAAM1B,IAAzB,GAAgC;AADpC;AAHD,qBAAX;;AAQA,2BAAOwB,MAAMM,aAAN,CAAoBiF,cAApB,CAAmC8C,SAAS/E,IAAT,CAAnC,CAAP;AACH,iBAXE,EAYFgF,IAZE,CAYG,kBAAU;AACZ,wBAAGjC,OAAOlC,IAAP,CAAY0H,SAAZ,IAAyBxF,OAAOlC,IAAP,CAAY0H,SAAZ,CAAsB,CAAtB,CAA5B,EAAqD;AACjD,+BAAOxF,OAAOlC,IAAP,CAAY0H,SAAZ,CAAsB,CAAtB,CAAP;AACH,qBAFD,MAEO;AACH,8BAAM7L,MAAMpC,KAAN,CAAY;AACdI;AADc,yBAAZ,CAAN;AAGH;AACJ,iBApBE,CAAP;AAqBH,aAzBU;AAhBJ,SAAX;;AA4CAuC,aAAKI,GAAL,CAASmL,IAAT,GAAgBN,QAAhB;AACA,eAAOA,QAAP;AACH;AAjDY,CAAjB,C;;;;;;;;;ACFA,IAAMO,iBAAiB,mBAAApO,CAAQ,EAAR,EAAkCsD,IAAzD;;AAEAzD,OAAOC,OAAP,GAAiB;AACbwD,QADa,gBACRV,IADQ,EACF;AACPwL,uBAAexL,IAAf;AACH;AAHY,CAAjB,C;;;;;;;;;;;;kBCCwBU,I;;AAFxB;;;;;;AAEe,SAASA,IAAT,CAAcV,IAAd,EAAoB;AAC/BA,SAAKyL,UAAL,GAAkB,UAACC,aAAD,EAAgB5L,OAAhB,EAA4B;AAC1C;AACA,2BAAW4L,aAAX,EAA0B5L,OAA1B,EAAmCE,IAAnC;AACH,KAHD;AAKH,C,CATD,mC;;;;;;;;;;;;;;ACAA;;AAEe,SAASU,IAAT,CAAciL,UAAd,EAA0B7L,OAA1B,EAAmCE,IAAnC,EAAyC;AACpDF,YAAQ8L,OAAR,GAAkB9L,QAAQ8L,OAAR,IAAmB,GAArC,CADoD,CACX;;AAEzC,uBAAI;AACAC,cAAMF,UADN;AAEAG,eAAO;AACHzN,kBAAMyB,QAAQzB,IAAR,IAAgB,GADnB;AAEH0N,qBAAS,EAFN;AAGHC,kBAAM,CAHH;AAIHC,wBAAY;AAJT,SAFP;AAQAC,iBAAS;AACLC,sBADK,sBACML,KADN,EACaI,OADb,EACsBE,UADtB,EACkC;AACnC,oBAAM/N,OAAO+N,cAAcN,MAAMzN,IAAjC;AACA,uBAAO,kBAAU;AACbgO,2BAAOxO,OAAOC,MAAP,CAAcgO,KAAd,EAAqB,EAACzN,MAAMA,IAAP,EAArB,CAAP;AACA2B,yBAAKI,GAAL,CAAS0I,OAAT,CAAiBX,GAAjB,CAAqB;AACjB9J,8BAAMyN,MAAMzN,IADK;AAEjBiO,+BAAOxM,QAAQ8L,OAFE;AAGjBW,gCAAQT,MAAME,IAAN,GAAa;AAHJ,qBAArB,EAIGjE,IAJH,CAIQ,kBAAU;AACdsE,+BAAOxO,OAAOC,MAAP,CAAcgO,KAAd,EAAqB;AACxBG,wCAAYO,KAAKC,IAAL,CAAUC,OAAOC,WAAP,GAAqB7M,QAAQ8L,OAAvC,CADY;AAExBG,qCAAS,GAAGa,MAAH,CAAUF,OAAOG,OAAjB,EAA0BH,OAAOI,KAAjC;AAFe,yBAArB,CAAP;AAIH,qBATD;AAUH,iBAZD;AAaH,aAhBI;;AAiBLC,uBAAW;AACPC,2BAAW,qBAAM;AACblN,4BAAQkN,SAAR,CAAkBlB,MAAMC,OAAN,CAAcV,MAAd,CAAqB;AAAA,+BAAGtF,EAAEkH,UAAL;AAAA,qBAArB,CAAlB;AACH,iBAHM;AAIPC,wBAAQ,kBAAM;AACVpN,4BAAQoN,MAAR;AACH,iBANM;AAOP3P,uBAAO,eAACuO,KAAD,EAAQI,OAAR,EAAiB3O,MAAjB,EAA2B;AAC9BuC,4BAAQvC,KAAR,CAAcA,MAAd;AACH;AATM;AAjBN,SART;AAqCA4P,gBAAQ;AACJC,gBADI,gBACCtB,KADD,EACQI,OADR,EACiB;AACjBA,wBAAQC,UAAR;AACH;AAHG,SArCR;AA0CAkB,cAAM,cAACvB,KAAD,EAAQI,OAAR;AAAA,mBACF;AAAA;AAAA,kBAAK,SAAM,eAAX;AACKJ,sBAAMC,OAAN,CAAcxN,GAAd,CAAkB;AAAA,2BAAQ+O,KAAKC,SAAL,GACrB,iBAAC,MAAD,IAAQ,MAAMD,IAAd,EAAoB,SAASpB,OAA7B,GADqB,GAErB,iBAAC,IAAD,IAAM,MAAMoB,IAAZ,EAAkB,SAASpB,OAA3B,GAFa;AAAA,iBAAlB;AADL,aADE;AAAA;AA1CN,KAAJ;AAmDH;;;;;;;;;;;;;ACxDW;AACE;;;;;;;;ACDd;AAAA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA4B,SAAS;AACrC;AACA;;AAEA;AACA;AACA,2BAA2B,KAAK;AAChC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;;;;;;;;AC/BA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,uBAAuB;AACxC;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,yBAAyB;;AAEnD;;AAEA;AACA;AACA,OAAO;AACP,qDAAqD;AACrD;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL,wDAAwD;AACxD;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,YAAY;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;ACxQA,IAAMlM,OAAO,mBAAA5C,CAAQ,CAAR,CAAb;AACA,IAAMiN,WAAW,mBAAAjN,CAAQ,EAAR,CAAjB;;AAEAH,OAAOC,OAAP,GAAiB;AACbwD,QADa,gBACRP,eADQ,EACS4C,IADT,EACe;AACxB;AACA,YAAMlD,WAAWG,KAAKH,QAAL,CAAchC,OAAOC,MAAP,CAAc,EAACsD,aAAa,mBAAAhE,CAAQ,EAAR,CAAd,EAAd,EAAiDiN,QAAjD,EAA2DtH,IAA3D,CAAd,CAAjB;AACAlD,iBAASI,SAAT,CAAmBE,eAAnB;AACA,eAAON,QAAP;AACH;AANY,CAAjB,C;;;;;;;;;ACHA5C,OAAOC,OAAP,GAAiB;AACbgH,iBAAa,IADA;AAEboB,SAAK;AAFQ,CAAjB,C;;;;;;;ACAA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA,mBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA;;;;;;;AC5LA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA;;;;;;;;ACRA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;;AC7BA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACbA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7CA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"egnyte.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Egnyte\"] = factory();\n\telse\n\t\troot[\"Egnyte\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4d364dd31bf97f4a4aa0","module.exports = {\n    \"fsmeta\": \"/v1/fs\",\n    \"fscontent\": \"/v1/fs-content\",\n    \"fschunked\": \"/v1/fs-content-chunked\",\n    \"notes\": \"/v1/notes\",\n    \"links\": \"/v1/links\",\n    \"perms\": \"/v1/perms\",\n    \"userinfo\": \"/v1/userinfo\",\n    \"users\": \"/v2/users/\",\n    \"events\": \"/v1/events\",\n    \"search\": \"/v1/search\",\n    \"eventscursor\": \"/v1/events/cursor\",\n    \"tokenauth\": \"/puboauth/token\"\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/ENDPOINTS.js","const helpers = require(\"../helpers\")\nmodule.exports = function mkerr(fields, error){\n    error = error || Error(fields.message)\n    fields.statusCode = fields.statusCode || 0\n    helpers.hintDeveloper(fields.hint, error)\n    return Object.assign(error, fields)\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/errors/mkerr.js","var disallowedChars = /[\":<>|?*\\\\]/;\n\nconst helpers = {\n    encodeNameSafe (name) {\n        if (!name) {\n            throw new Error(\"No name given\");\n        }\n        if (disallowedChars.test(name)) {\n            throw new Error(\"Disallowed characters in path\");\n        }\n\n        name = name.replace(/^\\/\\//, \"/\");\n\n        return (name);\n    },\n    encodePathComponents (path) {\n        path = helpers.encodeNameSafe(path)\n        return path.split(\"/\").map(encodeURIComponent).join(\"/\").replace(/#/g,\"%23\");\n        //TODO: handle special chars not covered by this.\n    },\n    normalizeEgnyteDomain (domain) {\n        return \"https://\" + (helpers.normalizeURL(domain).replace(/^https?:\\/\\//, \"\"));\n    },\n    normalizeURL(url) {\n        return (url).replace(/\\/*$/, \"\");\n    },\n    hintDeveloper(hint, err){\n        //TODO: make this optinal, by configuration or dev build\n        console && console.warn(hint, err)\n    }\n}\n\n\nmodule.exports = helpers;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/helpers.js","\"use strict\"\nconst requestEngineFactory = require(\"./reqengine\")\nconst helpers = require(\"./helpers\")\nconst decorators = require(\"./decorators\")\nconst inputHandler = require(\"./inputHandler\")\nconst mkerr = require(\"./errors/mkerr\")\n\nconst plugins = new Set()\n\nconst mkReqFunctionFactory = tools => (guarantees, apiFacadeMethod) => input =>\n    apiFacadeMethod(tools, decorators.configure(input), inputHandler.process(input, guarantees))\n\n\nmodule.exports = {\n    instance(options){\n        const tools = {\n            requestEngine: requestEngineFactory(options),\n            helpers: helpers,\n            mkerr,\n            inputHandler\n        }\n        const core = {\n            setDomain(domain){\n                const normalizedDomain = domain? helpers.normalizeEgnyteDomain(domain) : null\n                options.egnyteDomainURL = normalizedDomain\n                core.domain = normalizedDomain\n            },\n            API:{\n                manual: tools.requestEngine\n            },\n            domain: null,\n            _:{\n                mkReqFunction: mkReqFunctionFactory(tools)\n            }\n        }\n        plugins.forEach(p=>p.init(core))\n        return core\n    },\n    plug(plugin){\n        // Set automatically deduplicates if a plugin was added twice\n        plugins.add(plugin)\n    },\n    _:{\n        helpers,\n        plugins,\n        requestEngineFactory\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js","const core = require(\"./core\");\ncore.plug(require(\"./api/auth\"));\ncore.plug(require(\"./api/fs\"));\ncore.plug(require(\"./api/fs-browser\"));\ncore.plug(require(\"./api/links\"));\ncore.plug(require(\"./api/users\"));\ncore.plug(require(\"./frontend/index\"))\nmodule.exports = require(\"./index\");\n\n\n\n// WEBPACK FOOTER //\n// ./src/egnyte.browser.js","var errorify = require(\"./errors/errorify\");\n\nvar enginePrototypeMethods = {};\n\nfunction Engine(options) {\n    this.authType = \"Bearer\";\n    this.options = options;\n    this.token = options.token;\n\n    this.requestHandler = options.httpRequest;\n\n    this.quota = {\n        startOfTheSecond: 0,\n        calls: 0,\n        retrying: 0\n    }\n    this.queue = [];\n\n    this.queueHandler = _rollQueue.bind(this);\n}\nEngine.prototype = enginePrototypeMethods;\n\nmodule.exports = function createEngine(options) {\n    return new Engine(options);\n}\n\n\n\n//======================================================================\n// auth\n\n\nenginePrototypeMethods.isAuthorized = function () {\n    return !!this.token;\n}\n\nenginePrototypeMethods.getToken = function () {\n    return this.token;\n}\n\nenginePrototypeMethods.setToken = function (externalToken) {\n    this.token = externalToken;\n}\n\n\nenginePrototypeMethods.dropToken = function (externalToken) {\n    this.token = null;\n}\n\n\n//======================================================================\n//request handling\nfunction params(obj) {\n    var str = [];\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n            str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n        }\n    }\n    if (str.length) {\n        return \"?\" + str.join(\"&\");\n    } else {\n        return \"\";\n    }\n}\nenginePrototypeMethods.getEndpoint = function (appendice) {\n    var endpoint = this.options.egnyteDomainURL + \"/pubapi\";\n    if (appendice) {\n        if (appendice.charAt(0) !== \"/\") {\n            appendice = \"/\" + appendice\n        }\n        endpoint += appendice\n    }\n    return endpoint\n}\n\nenginePrototypeMethods.sendRequest = function (opts, callback, forceNoAuth) {\n    var self = this;\n    opts = Object.assign({}, self.options.requestDefaults, opts); //merging in the defaults\n    var originalOpts = Object.assign({}, opts); //just copying the object\n\n    if (this.isAuthorized() || forceNoAuth) {\n        opts.url += params(opts.params);\n        opts.headers = opts.headers || {};\n        if (!forceNoAuth) {\n            opts.headers[\"Authorization\"] = this.authType + \" \" + this.getToken();\n        }\n        if (!callback) {\n            return self.requestHandler(opts);\n        } else {\n            var timer;\n            var retry = function () {\n                self.sendRequest(originalOpts, self.retryHandler(callback, retry, timer));\n            };\n            if (self.timerStart) {\n                timer = self.timerStart();\n            }\n\n            return self.requestHandler(opts, self.retryHandler(callback, retry, timer));\n        }\n    } else {\n        callback.call(this, new Error(\"Not authorized\"), {\n            statusCode: 0\n        }, null);\n    }\n\n}\n\nenginePrototypeMethods.retryHandler = function (callback, retry, timer) {\n    var self = this;\n    return function (error, response, body) {\n        //build an error object for http errors\n        if (!error && response.statusCode >= 400 && response.statusCode < 600) {\n            error = new Error(body);\n        }\n        try {\n            //this shouldn't be required, but server sometimes responds with content-type text/plain\n            body = JSON.parse(body);\n        } catch (e) {}\n\n        if (response) {\n            var retryAfter = response.headers[\"retry-after\"];\n            var masheryCode = response.headers[\"x-mashery-error-code\"];\n            //in case headers get returned as arrays, we only expect one value\n            retryAfter = typeof retryAfter === \"array\" ? retryAfter[0] : retryAfter;\n            masheryCode = typeof masheryCode === \"array\" ? masheryCode[0] : masheryCode;\n        }\n\n        if (\n            response &&\n            self.options.handleQuota &&\n            response.statusCode === 403 &&\n            retryAfter\n        ) {\n            if (masheryCode === \"ERR_403_DEVELOPER_OVER_QPS\") {\n                //retry\n                console && console.warn(\"developer over QPS, retrying\");\n                self.quota.retrying = 1000 * ~~(retryAfter);\n                setTimeout(function () {\n                    self.quota.retrying = 0;\n                    retry();\n\n                }, self.quota.retrying);\n\n            }\n            if (masheryCode === \"ERR_403_DEVELOPER_OVER_RATE\") {\n                error.RATE = true;\n                callback.call(this, error, response, body);\n            }\n\n        } else {\n\n            if (\n                response &&\n                //Checking for failed auth responses\n                //(ノಠ益ಠ)ノ彡┻━┻\n                self.options.onInvalidToken &&\n                (\n                    response.statusCode === 401 ||\n                    (\n                        response.statusCode === 403 &&\n                        masheryCode === \"ERR_403_DEVELOPER_INACTIVE\"\n                    )\n                )\n            ) {\n                self.auth.dropToken();\n                self.options.onInvalidToken();\n            }\n            if (self.timerEnd) {\n                self.timerEnd(timer);\n            }\n            callback.call(this, error, response, body);\n        }\n    };\n}\n\nenginePrototypeMethods.retrieveStreamFromRequest = function (opts) {\n    var self = this;\n    return new Promise(function(resolve, reject){\n        var requestFunction = function () {\n\n            try {\n                var req = self.sendRequest(opts);\n                resolve(req);\n            } catch (error) {\n                reject(errorify({\n                    error: error\n                }));\n            }\n        }\n\n        if (!this.options.handleQuota) {\n            requestFunction();\n        } else {\n            //add to queue\n            this.queue.push(requestFunction);\n            //stop previous queue processing if any\n            clearTimeout(this.quota.to);\n            //start queue processing\n            this.queueHandler();\n        }\n    })\n}\n\nenginePrototypeMethods.promiseRequest = function (opts, requestHandler, forceNoAuth) {\n    var self = this;\n    return new Promise(function(resolve, reject){\n        var requestFunction = function () {\n            try {\n                var req = self.sendRequest(opts, function (error, response, body) {\n                    if (error) {\n                        reject(errorify({\n                            error: error,\n                            response: response,\n                            body: body\n                        }));\n                    } else {\n                        resolve({\n                            response: response,\n                            body: body\n                        });\n                    }\n                }, forceNoAuth);\n                requestHandler && requestHandler(req);\n            } catch (error) {\n                reject(errorify({\n                    error: error\n                }));\n            }\n        }\n        if (!self.options.handleQuota) {\n            requestFunction();\n        } else {\n            //add to queue\n            self.queue.push(requestFunction);\n            //stop previous queue processing if any\n            clearTimeout(self.quota.to);\n            //start queue processing\n            self.queueHandler();\n        }\n    })\n}\n\nenginePrototypeMethods.setupTiming = function (getTimer, timeEnd) {\n    this.timerStart = getTimer;\n    this.timerEnd = timeEnd;\n}\n\n//gets bound to this in the constructor and saved as this.queueHandler\nfunction _rollQueue() {\n    if (this.queue.length) {\n        var currentWait = _quotaWaitTime(this.quota, this.options.QPS);\n        if (currentWait === 0) {\n            var requestFunction = this.queue.shift();\n            requestFunction();\n            this.quota.calls++;\n        }\n        this.quota.to = setTimeout(this.queueHandler, currentWait);\n    }\n\n}\n\nfunction _quotaWaitTime(quota, QPS) {\n    var now = Date.now();\n    var diff = now - quota.startOfTheSecond;\n    //in the middle of retrying a denied call\n    if (quota.retrying) {\n        quota.startOfTheSecond = now + quota.retrying;\n        return quota.retrying + 1;\n    }\n    //last call was over a second ago, can start\n    if (diff > 1002) {\n        quota.startOfTheSecond = now;\n        quota.calls = 0;\n        return 0;\n    }\n    //calls limit not reached\n    if (quota.calls < QPS) {\n        return 0;\n    }\n    //calls limit reached, delay to the next second\n    return 1003 - diff;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/reqengine.js","const mkerr= require(\"./mkerr\")\n\n//making sense of all the different error message bodies\nvar isMsg = {\n    \"msg\": 1,\n    \"message\": 1,\n    \"errorMessage\": 1\n};\n\nvar htmlMsgRegex = /^\\s*<h1>([^<]*)<\\/h1>\\s*$/gi;\n\nfunction findMessage(obj) {\n    var result;\n    for (var i in obj) {\n        if (isMsg[i]) {\n            return obj[i];\n        }\n        if (typeof obj[i] === \"object\") {\n            result = findMessage(obj[i]);\n            if (result) {\n                return result;\n            }\n        }\n    }\n}\n//this should understand all the message formats from the server and translate to a nice message\nfunction psychicMessageParser(mess, statusCode) {\n    var nice;\n    if (typeof mess === \"string\") {\n        try {\n            nice = findMessage(JSON.parse(mess));\n            if (!nice) {\n                //fallback if nothing found - return raw JSON string anyway\n                nice = mess;\n            }\n        } catch (e) {\n            nice = mess ? mess.replace(htmlMsgRegex, \"$1\") : \"Unknown error\";\n        }\n        if (statusCode === 404 && mess.length > 300) {\n            //server returned a dirty 404\n            nice = \"Not found\";\n        }\n    } else {\n        nice = findMessage(mess);\n    }\n    return nice;\n}\n\nmodule.exports = function (result) {\n    var error, code;\n    if (result.response) {\n        code = ~~ (result.response.statusCode);\n        error = mkerr({\n            statusCode: code,\n            message: \"\"+psychicMessageParser(result.body||result.error.message, code),\n            response: result.response,\n            body: result.body,\n        }, result.error);\n    } else {\n        error = mkerr({\n            statusCode: 0,\n        }, result.error);\n    }\n    return error;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/errors/errorify.js","const mkerr = require(\"../errors/mkerr\")\n\n// IMPORTANT: order matters. Make sure customize is at the end and beforeSend is last\n//   so it doesn't get overwritten\nconst activeDecorators = [\n    // put more here, not below\n    require(\"./customize\"),\n    require(\"./query\"),\n    require(\"./beforeSend\")\n]\n\nmodule.exports = {\n    configure(input) {\n        return (opts) => {\n            opts = activeDecorators.reduce((optsModified, decorator) => {\n                if (decorator.name in input) {\n                    const updatedOpts = decorator.execute(optsModified, input)\n                    if (!updatedOpts) {\n                        throw mkerr({\n                            message: `Decorator from ${decorator.name} didn't return the options object`\n                        })\n                    }\n                    return updatedOpts\n                } else {\n                    return optsModified\n                }\n            }, opts)\n            return opts\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/decorators/index.js","module.exports = {\n    name: \"customizeRequest\",\n    execute(opts, input){\n        return Object.assign(opts, input.customizeRequest)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/decorators/customize.js","module.exports = {\n    name: \"queryParams\",\n    execute(opts, input){\n        Object.assign(opts.params, input.queryParams)\n        return opts\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/decorators/query.js","module.exports = {\n    name: \"beforeSend\",\n    execute(opts, input){\n        return input.beforeSend(opts, input)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/decorators/beforeSend.js","const mkerr = require(\"./errors/mkerr\")\nconst helpers = require(\"./helpers\")\n\n\nmodule.exports = {\n    process(originalInput, guarantees) {\n        let input = Object.assign({}, originalInput)\n        if (guarantees.requires) {\n            guarantees.requires.forEach(key => {\n                if (input[key] === undefined) {\n                    throw mkerr({\n                        message: `Invalid input, ${key} field required`,\n                        hint: `${key} field required`\n                    })\n                }\n            })\n        }\n        if (guarantees.optional) {\n            guarantees.optional.forEach(key => {\n                if (key in input && input[key] === undefined) {\n                    helpers.hintDeveloper(`${key} field was explicitly passed an undefined value. It's likely an accident. Avoid specifying the property at all if it's undefined.`)\n                }\n            })\n        }\n        if (guarantees.fsIdentification) {\n            if (!(input.fileId || input.folderId || input.path)) {\n                throw mkerr({\n                    message: `Identify a file or folder. One of the fields must be specified: fileId folderId path`,\n                    hint: `Identify a file or folder. One of the fields must be specified: fileId folderId path`\n                })\n            } else {\n                input = handleIdentification(input)\n            }\n        }\n        return input\n    }\n}\n\nconst goodId = /^[0-9a-z\\-]+$/i\nfunction detectIncorrectId(key, id){\n    if(!goodId.test(id)){\n        throw mkerr({\n            message: `Invalid file or folder identification, ${key} field seems to contain something else than an ID`,\n            hint: `${key} field expected to match ${goodId.toString()}`\n        })\n    }\n}\n\nfunction handleIdentification(input){\n    if(input.fileId){\n        detectIncorrectId(\"fileId\", input.fileId)\n        input.pathFromRoot = \"/ids/file/\"+input.fileId\n        return input\n    }\n    if(input.folderId){\n        detectIncorrectId(\"folderId\", input.folderId)\n        input.pathFromRoot = \"/ids/file/\"+input.folderId\n        return input\n    }\n    if(input.path){\n        input.pathFromRoot = helpers.encodePathComponents(input.path)\n        return input\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/inputHandler.js","const ENDPOINTS = require(\"./ENDPOINTS\");\n\nmodule.exports = {\n    init(core) {\n        const mkReqFunction = core._.mkReqFunction\n        authAPI = {\n            getUserInfo: mkReqFunction({}, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        var opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.userinfo),\n                        };\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.body);\n            }),\n            isAuthorized: mkReqFunction({}, (tools) =>\n                tools.requestEngine.isAuthorized()\n            ),\n\n        }\n\n        core.API.auth = authAPI\n        return authAPI\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/auth.js","const ENDPOINTS = require(\"./ENDPOINTS\");\n\nmodule.exports = {\n    init(core) {\n        const mkReqFunction = core._.mkReqFunction\n        const fsAPI = {\n            get: mkReqFunction({\n                fsIdentification: true,\n                optional: [\"versionEntryId\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot),\n                        };\n\n                        if (input.versionEntryId) {\n                            opts.params = {\n                                \"entry_id\": input.versionEntryId\n                            };\n                        }\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.body);\n            }),\n            exists: mkReqFunction({\n                fsIdentification: true\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot),\n                        };\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(\n                        result => (result.response.statusCode == 200), //breaking change\n                        result => { //result.error result.response, result.body\n                            if (result.response && result.response.statusCode == 404) {\n                                return false;\n                            } else {\n                                throw result;\n                            }\n                        }\n                    );\n            }),\n            parents: mkReqFunction({\n                fsIdentification: true\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot + \"/parents\")\n                        };\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.body);\n\n            }),\n            createFolder: mkReqFunction({\n                fsIdentification: true\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"POST\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot),\n                            json: {\n                                \"action\": \"add_folder\"\n                            }\n                        }\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.body); //breaking change\n\n            }),\n            //breaking change - no more rename, can be implemented properly later\n            move: mkReqFunction({\n                fsIdentification: true,\n                requires: [\"destination\"]\n            }, transfer.bind(null, \"move\")),\n            copy: mkReqFunction({\n                fsIdentification: true,\n                requires: [\"destination\"]\n            }, transfer.bind(null, \"copy\")),\n            remove: mkReqFunction({\n                fsIdentification: true,\n                optional: [\"versionEntryId\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"DELETE\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot),\n                        };\n                        if (input.versionEntryId) {\n                            opts.params = {\n                                \"entry_id\": versionEntryId\n                            };\n                        }\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.response.statusCode); //backwards commpatibility\n\n            }),\n        }\n\n        core.API.storage = fsAPI\n        return fsAPI\n    }\n}\n\n\nfunction transfer(action, tools, decorate, input) {\n    return Promise.resolve()\n        .then(() => {\n            const newPath = tools.helpers.encodeNameSafe(input.destination);\n            const opts = {\n                method: \"POST\",\n                url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot),\n                json: {\n                    \"action\": action,\n                    \"destination\": newPath,\n                }\n            };\n            return tools.requestEngine.promiseRequest(decorate(opts));\n        })\n        .then(result => result.body); //breaking change\n    // .then(function (result) { //result.response result.body\n    //     if (result.response.statusCode == 200) {\n    //         return {\n    //             oldPath: pathFromRoot,\n    //             path: newPath\n    //         };\n    //     }\n    // });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/fs.js","const ENDPOINTS = require(\"./ENDPOINTS\");\n\nmodule.exports = {\n    init(core) {\n        const mkReqFunction = core._.mkReqFunction\n        const fsBrowserAPI = {\n            download: mkReqFunction({\n                fsIdentification: true,\n                optional: [\"versionEntryId\", \"isBinary\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fscontent + input.pathFromRoot),\n                        };\n                        if (input.versionEntryId) {\n                            opts.params = {\n                                \"entry_id\": input.versionEntryId\n                            };\n                        }\n\n                        if (input.isBinary) {\n                            opts.responseType = \"arraybuffer\";\n                        }\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.response);\n            }),\n            storeFile: mkReqFunction({\n                fsIdentification: true,\n                requires: [\"file\"],\n                optional: [\"mimeType\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n\n                        const opts = {\n                            method: \"POST\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fscontent + input.pathFromRoot),\n                            body: input.file,\n                        }\n\n                        opts.headers = {};\n                        if (input.mimeType) {\n                            opts.headers[\"Content-Type\"] = input.mimeType;\n                        }\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => {\n                        result.body.id = result.response.headers[\"etag\"] //for backward compatibility\n                        return result.body\n                    });\n            }),\n            //TODO: check if EOS supports this\n            storeFileMultipart: mkReqFunction({\n                fsIdentification: true,\n                requires: [\"file\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        if (!window.FormData) {\n                            throw new Error(\"Unsupported browser\");\n                        }\n                        var file = fileOrBlob;\n                        var formData = new window.FormData();\n                        formData.append('file', file);\n                        pathFromRoot = helpers.encodeNameSafe(pathFromRoot) || \"\";\n                        var opts = {\n                            method: \"POST\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fscontent + input.pathFromRoot),\n                            body: formData,\n                        };\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => {\n                        result.body.id = result.response.headers[\"etag\"] //for backward compatibility\n                        return result.body\n                    });\n            }),\n\n        }\n\n        core.API.storage = Object.assign(core.API.storage, fsBrowserAPI)\n        return fsBrowserAPI\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/fs-browser.js","const ENDPOINTS_links = require(\"./ENDPOINTS\").links;\n\nmodule.exports = {\n    init(core) {\n        const mkReqFunction = core._.mkReqFunction\n        const linksAPI = {\n            createLink: mkReqFunction({\n                requires: [\"path\", \"linkSetup\"],\n                fsIdentification: true\n            }, (tools, decorate, input) => {\n                const linkSetup = input.linkSetup\n                const defaults = {\n                    path: null,\n                    type: \"file\",\n                    accessibility: \"domain\"\n                };\n                return Promise.resolve()\n                    .then(() => {\n                        const setup = Object.assign(defaults, linkSetup, {\n                            path: input.pathFromRoot\n                        });\n                        // setup.path = tools.encodeNameSafe(setup.path);\n\n                        return tools.requestEngine.promiseRequest(decorate({\n                            method: \"POST\",\n                            url: tools.requestEngine.getEndpoint() + ENDPOINTS_links,\n                            json: setup\n                        }));\n                    }).then(function (result) { //result.response result.body\n                        return result.body;\n                    });\n            }),\n            removeLink: mkReqFunction({\n                requires: [\"id\"]\n            }, (tools, decorate, input) => {\n                return tools.requestEngine.promiseRequest(decorate({\n                    method: \"DELETE\",\n                    url: tools.requestEngine.getEndpoint() + ENDPOINTS_links + \"/\" + input.id\n                })).then(function (result) { //result.response result.body\n                    return result.response.statusCode;\n                });\n            }),\n            listLink: mkReqFunction({\n                requires: [\"id\"]\n            }, (tools, decorate, input) => {\n                return tools.requestEngine.promiseRequest(decorate({\n                    method: \"GET\",\n                    url: tools.requestEngine.getEndpoint() + ENDPOINTS_links + \"/\" + input.id\n                })).then(function (result) { //result.response result.body\n                    return result.body;\n                });\n            }),\n            listLinks: mkReqFunction({\n                requires: [\"filters\"]\n            }, (tools, decorate, input) => {\n                const filters = input.filters\n                return Promise.resolve()\n                    .then(function () {\n                        filters.path = filters.path && tools.helpers.encodeNameSafe(filters.path);\n\n                        return tools.requestEngine.promiseRequest(decorate({\n                            method: \"get\",\n                            url: tools.requestEngine.getEndpoint() + ENDPOINTS_links,\n                            params: filters\n                        }));\n                    }).then(function (result) { //result.response result.body\n                        return result.body;\n                    });\n            }),\n            findOne: mkReqFunction({\n                requires: [\"filters\"]\n            }, (tools, decorate, input) => {\n                return linksAPI.listLinks(input).then(function (list) {\n                    if (list.ids && list.ids.length > 0) {\n                        return linksAPI.listLink({\n                            id: list.ids[0]\n                        });\n                    } else {\n                        return null;\n                    }\n                });\n            }),\n        }\n\n        core.API.link = linksAPI\n        return linksAPI\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/links.js","const ENDPOINTS = require(\"./ENDPOINTS\");\n\nmodule.exports = {\n    init(core) {\n        const mkReqFunction = core._.mkReqFunction;\n        usersAPI = {\n            getById: mkReqFunction({\n                fsIdentification: false,\n                requires: [\"id\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        let opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.users + input.id),\n                        };\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.body);\n            }),\n            getByName: mkReqFunction({\n                fsIdentification: false,\n                requires: [\"name\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        let opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.users),\n                            params: {\n                                filter: \"userName eq \\\"\" + input.name + \"\\\"\"\n                            }\n                        };\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => {\n                        if(result.body.resources && result.body.resources[0]){\n                            return result.body.resources[0];\n                        } else {\n                            throw tools.mkerr({\n                                message: `User not found`\n                            });\n                        }\n                    });\n            }),\n        };\n\n        core.API.user = usersAPI;\n        return usersAPI\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/users.js","const filePickerInit = require(\"./filepicker/index.jsx\").init\n\nmodule.exports = {\n    init(core) {\n        filePickerInit(core)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/index.js","// accept input and pass to the app\nimport filePicker from \"./app.jsx\"\n\nexport default function init(core) {\n    core.filePicker = (containerNode, options) => {\n        // TODO: options validation and authentication mechanisms to be added here\n        filePicker(containerNode, options, core)\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/filepicker/index.jsx","import {h, app} from \"hyperapp\"\n\nexport default function init(targetNode, options, core) {\n    options.perPage = options.perPage || 100 //TODO: move up to index\n\n    app({\n        root: targetNode,\n        state: {\n            path: options.path || \"/\",\n            listing: [],\n            page: 1,\n            pagesTotal: 0\n        },\n        actions: {\n            listFolder(state, actions, folderPath) {\n                const path = folderPath || state.path\n                return update => {\n                    update(Object.assign(state, {path: path}))\n                    core.API.storage.get({\n                        path: state.path,\n                        count: options.perPage,\n                        offset: state.page - 1\n                    }).then(folder => {\n                        update(Object.assign(state, {\n                            pagesTotal: Math.ceil(folder.total_count / options.perPage),\n                            listing: [].concat(folder.folders, folder.files)\n                        }))\n                    })\n                }\n            },\n            callbacks: {\n                selection: () => {\n                    options.selection(state.listing.filter(i=>i.isSelected))\n                },\n                cancel: () => {\n                    options.cancel()\n                },\n                error: (state, actions, error) => {\n                    options.error(error)\n                }\n            }\n        },\n        events: {\n            load(state, actions) {\n                actions.listFolder()\n            }\n        },\n        view: (state, actions) => (\n            <div class=\"eg-filepicker\">\n                {state.listing.map(item => item.is_folder\n                    ? <Folder item={item} actions={actions}/>\n                    : <File item={item} actions={actions}/>)}\n            </div>\n        )\n    })\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/filepicker/app.jsx","export { h } from \"./h\"\nexport { app } from \"./app\"\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/hyperapp/src/index.js\n// module id = 20\n// module chunks = 0","var i\nvar stack = []\n\nexport function h(tag, data) {\n  var node\n  var children = []\n\n  for (i = arguments.length; i-- > 2; ) {\n    stack.push(arguments[i])\n  }\n\n  while (stack.length) {\n    if (Array.isArray((node = stack.pop()))) {\n      for (i = node.length; i--; ) {\n        stack.push(node[i])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      if (typeof node === \"number\") {\n        node = node + \"\"\n      }\n      children.push(node)\n    }\n  }\n\n  return typeof tag === \"string\"\n    ? {\n        tag: tag,\n        data: data || {},\n        children: children\n      }\n    : tag(data, children)\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/hyperapp/src/h.js\n// module id = 21\n// module chunks = 0","var globalInvokeLaterStack = []\n\nexport function app(props) {\n  var appState\n  var appView = props.view\n  var appActions = {}\n  var appEvents = {}\n  var appMixins = props.mixins || []\n  var appRoot = props.root || document.body\n  var element = appRoot.children[0]\n  var oldNode\n  var willRender\n\n  for (var i = 0; i <= appMixins.length; i++) {\n    var mixin = appMixins[i] ? appMixins[i](emit) : props\n\n    Object.keys(mixin.events || []).map(function(key) {\n      appEvents[key] = (appEvents[key] || []).concat(mixin.events[key])\n    })\n\n    initialize(appActions, mixin.actions)\n    appState = merge(appState, mixin.state)\n  }\n\n  requestRender(\n    (oldNode = emit(\"load\", element)) === element && (oldNode = element = null)\n  )\n\n  return emit\n\n  function initialize(actions, withActions, lastName) {\n    Object.keys(withActions || []).map(function(key) {\n      var action = withActions[key]\n      var name = lastName ? lastName + \".\" + key : key\n\n      if (typeof action === \"function\") {\n        actions[key] = function(data) {\n          emit(\"action\", { name: name, data: data })\n\n          var result = emit(\"resolve\", action(appState, appActions, data))\n\n          return typeof result === \"function\" ? result(update) : update(result)\n        }\n      } else {\n        initialize(actions[key] || (actions[key] = {}), action, name)\n      }\n    })\n  }\n\n  function render(cb) {\n    element = patch(\n      appRoot,\n      element,\n      oldNode,\n      (oldNode = emit(\"render\", appView)(appState, appActions)),\n      (willRender = !willRender)\n    )\n    while ((cb = globalInvokeLaterStack.pop())) cb()\n  }\n\n  function requestRender() {\n    if (appView && !willRender) {\n      requestAnimationFrame(render, (willRender = !willRender))\n    }\n  }\n\n  function update(withState) {\n    if (withState && (withState = emit(\"update\", merge(appState, withState)))) {\n      requestRender((appState = withState))\n    }\n    return appState\n  }\n\n  function emit(name, data) {\n    return (appEvents[name] || []).map(function(cb) {\n      var result = cb(appState, appActions, data)\n      if (result != null) {\n        data = result\n      }\n    }), data\n  }\n\n  function merge(a, b) {\n    var obj = {}\n\n    for (var i in a) {\n      obj[i] = a[i]\n    }\n\n    for (var i in b) {\n      obj[i] = b[i]\n    }\n\n    return obj\n  }\n\n  function getKey(node) {\n    if (node && (node = node.data)) {\n      return node.key\n    }\n  }\n\n  function createElement(node, isSVG) {\n    if (typeof node === \"string\") {\n      var element = document.createTextNode(node)\n    } else {\n      var element = (isSVG = isSVG || node.tag === \"svg\")\n        ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n        : document.createElement(node.tag)\n\n      if (node.data && node.data.oncreate) {\n        globalInvokeLaterStack.push(function() {\n          node.data.oncreate(element)\n        })\n      }\n\n      for (var i in node.data) {\n        setData(element, i, node.data[i])\n      }\n\n      for (var i = 0; i < node.children.length; ) {\n        element.appendChild(createElement(node.children[i++], isSVG))\n      }\n    }\n\n    return element\n  }\n\n  function setData(element, name, value, oldValue) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var i in merge(oldValue, (value = value || {}))) {\n        element.style[i] = value[i] || \"\"\n      }\n    } else {\n      try {\n        element[name] = value\n      } catch (_) {}\n\n      if (typeof value !== \"function\") {\n        if (value) {\n          element.setAttribute(name, value)\n        } else {\n          element.removeAttribute(name)\n        }\n      }\n    }\n  }\n\n  function updateElement(element, oldData, data) {\n    for (var i in merge(oldData, data)) {\n      var value = data[i]\n      var oldValue = i === \"value\" || i === \"checked\" ? element[i] : oldData[i]\n\n      if (value !== oldValue) {\n        setData(element, i, value, oldValue)\n      }\n    }\n\n    if (data && data.onupdate) {\n      globalInvokeLaterStack.push(function() {\n        data.onupdate(element, oldData)\n      })\n    }\n  }\n\n  function removeElement(parent, element, data) {\n    if (data && data.onremove) {\n      data.onremove(element)\n    } else {\n      parent.removeChild(element)\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSVG, nextSibling) {\n    if (oldNode == null) {\n      element = parent.insertBefore(createElement(node, isSVG), element)\n    } else if (node.tag != null && node.tag === oldNode.tag) {\n      updateElement(element, oldNode.data, node.data)\n\n      isSVG = isSVG || node.tag === \"svg\"\n\n      var len = node.children.length\n      var oldLen = oldNode.children.length\n      var oldKeyed = {}\n      var oldElements = []\n      var keyed = {}\n\n      for (var i = 0; i < oldLen; i++) {\n        var oldElement = (oldElements[i] = element.childNodes[i])\n        var oldChild = oldNode.children[i]\n        var oldKey = getKey(oldChild)\n\n        if (null != oldKey) {\n          oldKeyed[oldKey] = [oldElement, oldChild]\n        }\n      }\n\n      var i = 0\n      var j = 0\n\n      while (j < len) {\n        var oldElement = oldElements[i]\n        var oldChild = oldNode.children[i]\n        var newChild = node.children[j]\n\n        var oldKey = getKey(oldChild)\n        if (keyed[oldKey]) {\n          i++\n          continue\n        }\n\n        var newKey = getKey(newChild)\n\n        var keyedNode = oldKeyed[newKey] || []\n\n        if (null == newKey) {\n          if (null == oldKey) {\n            patch(element, oldElement, oldChild, newChild, isSVG)\n            j++\n          }\n          i++\n        } else {\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], newChild, isSVG)\n            i++\n          } else if (keyedNode[0]) {\n            element.insertBefore(keyedNode[0], oldElement)\n            patch(element, keyedNode[0], keyedNode[1], newChild, isSVG)\n          } else {\n            patch(element, oldElement, null, newChild, isSVG)\n          }\n\n          j++\n          keyed[newKey] = newChild\n        }\n      }\n\n      while (i < oldLen) {\n        var oldChild = oldNode.children[i]\n        var oldKey = getKey(oldChild)\n        if (null == oldKey) {\n          removeElement(element, oldElements[i], oldChild.data)\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        var keyedNode = oldKeyed[i]\n        var reusableNode = keyedNode[1]\n        if (!keyed[reusableNode.data.key]) {\n          removeElement(element, keyedNode[0], reusableNode.data)\n        }\n      }\n    } else if (element && node !== element.nodeValue) {\n      element = parent.insertBefore(\n        createElement(node, isSVG),\n        (nextSibling = element)\n      )\n      removeElement(parent, nextSibling, oldNode.data)\n    }\n\n    return element\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/hyperapp/src/app.js\n// module id = 22\n// module chunks = 0","const core = require(\"./core\")\nconst defaults = require(\"./defaults.js\");\n\nmodule.exports = {\n    init(egnyteDomainURL, opts) {\n        //TODO: plug in httpRequest depending on env\n        const instance = core.instance(Object.assign({httpRequest: require(\"request\")}, defaults, opts))\n        instance.setDomain(egnyteDomainURL)\n        return instance\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = {\n    handleQuota: true,\n    QPS: 2\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults.js","\"use strict\";\nvar window = require(\"global/window\")\nvar once = require(\"once\")\nvar parseHeaders = require(\"parse-headers\")\n\n\n\nmodule.exports = createXHR\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction createXHR(options, callback) {\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            loadFunc()\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else if (xhr.responseType === \"text\" || !xhr.responseType) {\n            body = xhr.responseText || xhr.responseXML\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    var failureResponse = {\n                body: undefined,\n                headers: {},\n                statusCode: 0,\n                method: method,\n                url: uri,\n                rawRequest: xhr\n            }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        callback(err, response, response.body)\n\n    }\n\n    if (typeof options === \"string\") {\n        options = { uri: options }\n    }\n\n    options = options || {}\n    if(typeof callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n    callback = once(callback)\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n\n    if (\"json\" in options) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            aborted=true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    xhr.send(body)\n\n    return xhr\n\n\n}\n\nfunction noop() {}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/index.js\n// module id = 25\n// module chunks = 0","if (typeof window !== \"undefined\") {\n    module.exports = window;\n} else if (typeof global !== \"undefined\") {\n    module.exports = global;\n} else if (typeof self !== \"undefined\"){\n    module.exports = self;\n} else {\n    module.exports = {};\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/global/window.js\n// module id = 26\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 27\n// module chunks = 0","module.exports = once\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var called = false\n  return function () {\n    if (called) return\n    called = true\n    return fn.apply(this, arguments)\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/once/once.js\n// module id = 28\n// module chunks = 0","var trim = require('trim')\n  , forEach = require('for-each')\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  forEach(\n      trim(headers).split('\\n')\n    , function (row) {\n        var index = row.indexOf(':')\n          , key = trim(row.slice(0, index)).toLowerCase()\n          , value = trim(row.slice(index + 1))\n\n        if (typeof(result[key]) === 'undefined') {\n          result[key] = value\n        } else if (isArray(result[key])) {\n          result[key].push(value)\n        } else {\n          result[key] = [ result[key], value ]\n        }\n      }\n  )\n\n  return result\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/parse-headers/parse-headers.js\n// module id = 29\n// module chunks = 0","\nexports = module.exports = trim;\n\nfunction trim(str){\n  return str.replace(/^\\s*|\\s*$/g, '');\n}\n\nexports.left = function(str){\n  return str.replace(/^\\s*/, '');\n};\n\nexports.right = function(str){\n  return str.replace(/\\s*$/, '');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js\n// module id = 30\n// module chunks = 0","var isFunction = require('is-function')\n\nmodule.exports = forEach\n\nvar toString = Object.prototype.toString\nvar hasOwnProperty = Object.prototype.hasOwnProperty\n\nfunction forEach(list, iterator, context) {\n    if (!isFunction(iterator)) {\n        throw new TypeError('iterator must be a function')\n    }\n\n    if (arguments.length < 3) {\n        context = this\n    }\n    \n    if (toString.call(list) === '[object Array]')\n        forEachArray(list, iterator, context)\n    else if (typeof list === 'string')\n        forEachString(list, iterator, context)\n    else\n        forEachObject(list, iterator, context)\n}\n\nfunction forEachArray(array, iterator, context) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            iterator.call(context, array[i], i, array)\n        }\n    }\n}\n\nfunction forEachString(string, iterator, context) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        iterator.call(context, string.charAt(i), i, string)\n    }\n}\n\nfunction forEachObject(object, iterator, context) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            iterator.call(context, object[k], k, object)\n        }\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js\n// module id = 31\n// module chunks = 0","module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js\n// module id = 32\n// module chunks = 0"],"sourceRoot":""}