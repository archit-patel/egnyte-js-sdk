{"version":3,"sources":["webpack:///webpack/bootstrap 5846dc308a710859aebb","webpack:///./src/api/ENDPOINTS.js","webpack:///./src/core/errors/mkerr.js","webpack:///./src/core/helpers.js","webpack:///./src/core/index.js","webpack:///./src/egnyte.js","webpack:///./src/core/reqengine.js","webpack:///./src/core/errors/errorify.js","webpack:///./src/core/decorators/index.js","webpack:///./src/core/inputHandler.js","webpack:///./src/api/auth.js","webpack:///./src/api/fs.js","webpack:///./src/api/fs-browser.js","webpack:///./src/api/links.js","webpack:///./src/api/users.js","webpack:///./src/index.js","webpack:///./src/defaults.js","webpack:///./node_modules/xhr/index.js","webpack:///./node_modules/xhr/node_modules/global/window.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/xhr/node_modules/once/once.js","webpack:///./node_modules/xhr/node_modules/parse-headers/parse-headers.js","webpack:///./node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js","webpack:///./node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js","webpack:///./node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js"],"names":["module","exports","helpers","require","mkerr","fields","error","Error","message","statusCode","hintDeveloper","hint","Object","assign","disallowedChars","encodeNameSafe","name","test","replace","encodePathComponents","path","split","map","encodeURIComponent","join","normalizeEgnyteDomain","domain","normalizeURL","url","err","console","warn","requestEngineFactory","decorators","inputHandler","plugins","Set","mkReqFunctionFactory","tools","guarantees","apiFacadeMethod","input","configure","process","instance","options","requestEngine","core","setDomain","normalizedDomain","egnyteDomainURL","API","manual","_","mkReqFunction","forEach","p","init","plug","plugin","add","window","Egnyte","errorify","enginePrototypeMethods","Engine","authType","token","requestHandler","httpRequest","quota","startOfTheSecond","calls","retrying","queue","queueHandler","_rollQueue","bind","prototype","createEngine","isAuthorized","getToken","setToken","externalToken","dropToken","params","obj","str","hasOwnProperty","push","length","getEndpoint","appendice","endpoint","charAt","sendRequest","opts","callback","forceNoAuth","self","requestDefaults","originalOpts","headers","timer","retry","retryHandler","timerStart","call","response","body","JSON","parse","e","retryAfter","masheryCode","handleQuota","setTimeout","RATE","onInvalidToken","auth","timerEnd","retrieveStreamFromRequest","Promise","resolve","reject","requestFunction","req","clearTimeout","to","promiseRequest","setupTiming","getTimer","timeEnd","currentWait","_quotaWaitTime","QPS","shift","now","Date","diff","isMsg","htmlMsgRegex","findMessage","result","i","psychicMessageParser","mess","nice","code","originalInput","requires","key","undefined","optional","fsIdentification","fileId","folderId","handleIdentification","goodId","detectIncorrectId","id","toString","pathFromRoot","ENDPOINTS","authAPI","getUserInfo","decorate","then","method","userinfo","fsAPI","get","fsmeta","versionEntryId","exists","parents","createFolder","json","move","transfer","copy","remove","storage","action","newPath","destination","fsBrowserAPI","download","fscontent","isBinary","responseType","storeFile","file","mimeType","storeFileMultipart","FormData","fileOrBlob","formData","append","ENDPOINTS_links","links","linksAPI","createLink","linkSetup","defaults","type","accessibility","setup","removeLink","listLink","listLinks","filters","findOne","list","ids","link","usersAPI","getById","users","getByName","filter","resources","user"],"mappings":"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;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA,mBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA;;;;;;;AC5LA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA;;;;;;;;ACRA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;;AC7BA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACbA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7CA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"egnyte.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5846dc308a710859aebb","module.exports = {\n    \"fsmeta\": \"/v1/fs\",\n    \"fscontent\": \"/v1/fs-content\",\n    \"fschunked\": \"/v1/fs-content-chunked\",\n    \"notes\": \"/v1/notes\",\n    \"links\": \"/v1/links\",\n    \"perms\": \"/v1/perms\",\n    \"userinfo\": \"/v1/userinfo\",\n    \"users\": \"/v2/users/\",\n    \"events\": \"/v1/events\",\n    \"search\": \"/v1/search\",\n    \"eventscursor\": \"/v1/events/cursor\",\n    \"tokenauth\": \"/puboauth/token\"\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/ENDPOINTS.js","const helpers = require(\"../helpers\")\nmodule.exports = function mkerr(fields, error){\n    error = error || Error(fields.message)\n    fields.statusCode = fields.statusCode || 0\n    helpers.hintDeveloper(fields.hint, error)\n    return Object.assign(error, fields)\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/errors/mkerr.js","var disallowedChars = /[\":<>|?*\\\\]/;\n\nconst helpers = {\n    encodeNameSafe (name) {\n        if (!name) {\n            throw new Error(\"No name given\");\n        }\n        if (disallowedChars.test(name)) {\n            throw new Error(\"Disallowed characters in path\");\n        }\n\n        name = name.replace(/^\\/\\//, \"/\");\n\n        return (name);\n    },\n    encodePathComponents (path) {\n        path = helpers.encodeNameSafe(path)\n        return path.split(\"/\").map(encodeURIComponent).join(\"/\").replace(/#/g,\"%23\");\n        //TODO: handle special chars not covered by this.\n    },\n    normalizeEgnyteDomain (domain) {\n        return \"https://\" + (helpers.normalizeURL(domain).replace(/^https?:\\/\\//, \"\"));\n    },\n    normalizeURL(url) {\n        return (url).replace(/\\/*$/, \"\");\n    },\n    hintDeveloper(hint, err){\n        //TODO: make this optinal, by configuration or dev build\n        console && console.warn(hint, err)\n    }\n}\n\n\nmodule.exports = helpers;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/helpers.js","\"use strict\"\nconst requestEngineFactory = require(\"./reqengine\")\nconst helpers = require(\"./helpers\")\nconst decorators = require(\"./decorators\")\nconst inputHandler = require(\"./inputHandler\")\nconst mkerr = require(\"./errors/mkerr\")\n\nconst plugins = new Set()\n\nconst mkReqFunctionFactory = tools => (guarantees, apiFacadeMethod) => input =>\n    apiFacadeMethod(tools, decorators.configure(input), inputHandler.process(input, guarantees))\n\n\nmodule.exports = {\n    instance(options){\n        const tools = {\n            requestEngine: requestEngineFactory(options),\n            helpers: helpers,\n            mkerr,\n            inputHandler\n        }\n        const core = {\n            setDomain(domain){\n                const normalizedDomain = domain? helpers.normalizeEgnyteDomain(domain) : null\n                options.egnyteDomainURL = normalizedDomain\n                core.domain = normalizedDomain\n            },\n            API:{\n                manual: tools.requestEngine\n            },\n            domain: null,\n            _:{\n                mkReqFunction: mkReqFunctionFactory(tools)\n            }\n        }\n        plugins.forEach(p=>p.init(core))\n        return core\n    },\n    plug(plugin){\n        // Set automatically deduplicates if a plugin was added twice\n        plugins.add(plugin)\n    },\n    _:{\n        helpers,\n        plugins,\n        requestEngineFactory\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js","const core = require(\"./core\");\ncore.plug(require(\"./api/auth\"));\ncore.plug(require(\"./api/fs\"));\ncore.plug(require(\"./api/fs-browser\"));\ncore.plug(require(\"./api/links\"));\ncore.plug(require(\"./api/users\"));\nwindow.Egnyte = require(\"./index\");\n\n\n\n// WEBPACK FOOTER //\n// ./src/egnyte.js","var errorify = require(\"./errors/errorify\");\n\nvar enginePrototypeMethods = {};\n\nfunction Engine(options) {\n    this.authType = \"Bearer\";\n    this.options = options;\n    this.token = options.token;\n\n    this.requestHandler = options.httpRequest;\n\n    this.quota = {\n        startOfTheSecond: 0,\n        calls: 0,\n        retrying: 0\n    }\n    this.queue = [];\n\n    this.queueHandler = _rollQueue.bind(this);\n}\nEngine.prototype = enginePrototypeMethods;\n\nmodule.exports = function createEngine(options) {\n    return new Engine(options);\n}\n\n\n\n//======================================================================\n// auth\n\n\nenginePrototypeMethods.isAuthorized = function () {\n    return !!this.token;\n}\n\nenginePrototypeMethods.getToken = function () {\n    return this.token;\n}\n\nenginePrototypeMethods.setToken = function (externalToken) {\n    this.token = externalToken;\n}\n\n\nenginePrototypeMethods.dropToken = function (externalToken) {\n    this.token = null;\n}\n\n\n//======================================================================\n//request handling\nfunction params(obj) {\n    var str = [];\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n            str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n        }\n    }\n    if (str.length) {\n        return \"?\" + str.join(\"&\");\n    } else {\n        return \"\";\n    }\n}\nenginePrototypeMethods.getEndpoint = function (appendice) {\n    var endpoint = this.options.egnyteDomainURL + \"/pubapi\";\n    if (appendice) {\n        if (appendice.charAt(0) !== \"/\") {\n            appendice = \"/\" + appendice\n        }\n        endpoint += appendice\n    }\n    return endpoint\n}\n\nenginePrototypeMethods.sendRequest = function (opts, callback, forceNoAuth) {\n    var self = this;\n    opts = Object.assign({}, self.options.requestDefaults, opts); //merging in the defaults\n    var originalOpts = Object.assign({}, opts); //just copying the object\n\n    if (this.isAuthorized() || forceNoAuth) {\n        opts.url += params(opts.params);\n        opts.headers = opts.headers || {};\n        if (!forceNoAuth) {\n            opts.headers[\"Authorization\"] = this.authType + \" \" + this.getToken();\n        }\n        if (!callback) {\n            return self.requestHandler(opts);\n        } else {\n            var timer;\n            var retry = function () {\n                self.sendRequest(originalOpts, self.retryHandler(callback, retry, timer));\n            };\n            if (self.timerStart) {\n                timer = self.timerStart();\n            }\n\n            return self.requestHandler(opts, self.retryHandler(callback, retry, timer));\n        }\n    } else {\n        callback.call(this, new Error(\"Not authorized\"), {\n            statusCode: 0\n        }, null);\n    }\n\n}\n\nenginePrototypeMethods.retryHandler = function (callback, retry, timer) {\n    var self = this;\n    return function (error, response, body) {\n        //build an error object for http errors\n        if (!error && response.statusCode >= 400 && response.statusCode < 600) {\n            error = new Error(body);\n        }\n        try {\n            //this shouldn't be required, but server sometimes responds with content-type text/plain\n            body = JSON.parse(body);\n        } catch (e) {}\n\n        if (response) {\n            var retryAfter = response.headers[\"retry-after\"];\n            var masheryCode = response.headers[\"x-mashery-error-code\"];\n            //in case headers get returned as arrays, we only expect one value\n            retryAfter = typeof retryAfter === \"array\" ? retryAfter[0] : retryAfter;\n            masheryCode = typeof masheryCode === \"array\" ? masheryCode[0] : masheryCode;\n        }\n\n        if (\n            response &&\n            self.options.handleQuota &&\n            response.statusCode === 403 &&\n            retryAfter\n        ) {\n            if (masheryCode === \"ERR_403_DEVELOPER_OVER_QPS\") {\n                //retry\n                console && console.warn(\"developer over QPS, retrying\");\n                self.quota.retrying = 1000 * ~~(retryAfter);\n                setTimeout(function () {\n                    self.quota.retrying = 0;\n                    retry();\n\n                }, self.quota.retrying);\n\n            }\n            if (masheryCode === \"ERR_403_DEVELOPER_OVER_RATE\") {\n                error.RATE = true;\n                callback.call(this, error, response, body);\n            }\n\n        } else {\n\n            if (\n                response &&\n                //Checking for failed auth responses\n                //(ノಠ益ಠ)ノ彡┻━┻\n                self.options.onInvalidToken &&\n                (\n                    response.statusCode === 401 ||\n                    (\n                        response.statusCode === 403 &&\n                        masheryCode === \"ERR_403_DEVELOPER_INACTIVE\"\n                    )\n                )\n            ) {\n                self.auth.dropToken();\n                self.options.onInvalidToken();\n            }\n            if (self.timerEnd) {\n                self.timerEnd(timer);\n            }\n            callback.call(this, error, response, body);\n        }\n    };\n}\n\nenginePrototypeMethods.retrieveStreamFromRequest = function (opts) {\n    var self = this;\n    return new Promise(function(resolve, reject){\n        var requestFunction = function () {\n\n            try {\n                var req = self.sendRequest(opts);\n                resolve(req);\n            } catch (error) {\n                reject(errorify({\n                    error: error\n                }));\n            }\n        }\n\n        if (!this.options.handleQuota) {\n            requestFunction();\n        } else {\n            //add to queue\n            this.queue.push(requestFunction);\n            //stop previous queue processing if any\n            clearTimeout(this.quota.to);\n            //start queue processing\n            this.queueHandler();\n        }\n    })\n}\n\nenginePrototypeMethods.promiseRequest = function (opts, requestHandler, forceNoAuth) {\n    var self = this;\n    return new Promise(function(resolve, reject){\n        var requestFunction = function () {\n            try {\n                var req = self.sendRequest(opts, function (error, response, body) {\n                    if (error) {\n                        reject(errorify({\n                            error: error,\n                            response: response,\n                            body: body\n                        }));\n                    } else {\n                        resolve({\n                            response: response,\n                            body: body\n                        });\n                    }\n                }, forceNoAuth);\n                requestHandler && requestHandler(req);\n            } catch (error) {\n                reject(errorify({\n                    error: error\n                }));\n            }\n        }\n        if (!self.options.handleQuota) {\n            requestFunction();\n        } else {\n            //add to queue\n            self.queue.push(requestFunction);\n            //stop previous queue processing if any\n            clearTimeout(self.quota.to);\n            //start queue processing\n            self.queueHandler();\n        }\n    })\n}\n\nenginePrototypeMethods.setupTiming = function (getTimer, timeEnd) {\n    this.timerStart = getTimer;\n    this.timerEnd = timeEnd;\n}\n\n//gets bound to this in the constructor and saved as this.queueHandler\nfunction _rollQueue() {\n    if (this.queue.length) {\n        var currentWait = _quotaWaitTime(this.quota, this.options.QPS);\n        if (currentWait === 0) {\n            var requestFunction = this.queue.shift();\n            requestFunction();\n            this.quota.calls++;\n        }\n        this.quota.to = setTimeout(this.queueHandler, currentWait);\n    }\n\n}\n\nfunction _quotaWaitTime(quota, QPS) {\n    var now = Date.now();\n    var diff = now - quota.startOfTheSecond;\n    //in the middle of retrying a denied call\n    if (quota.retrying) {\n        quota.startOfTheSecond = now + quota.retrying;\n        return quota.retrying + 1;\n    }\n    //last call was over a second ago, can start\n    if (diff > 1002) {\n        quota.startOfTheSecond = now;\n        quota.calls = 0;\n        return 0;\n    }\n    //calls limit not reached\n    if (quota.calls < QPS) {\n        return 0;\n    }\n    //calls limit reached, delay to the next second\n    return 1003 - diff;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/reqengine.js","const mkerr= require(\"./mkerr\")\n\n//making sense of all the different error message bodies\nvar isMsg = {\n    \"msg\": 1,\n    \"message\": 1,\n    \"errorMessage\": 1\n};\n\nvar htmlMsgRegex = /^\\s*<h1>([^<]*)<\\/h1>\\s*$/gi;\n\nfunction findMessage(obj) {\n    var result;\n    for (var i in obj) {\n        if (isMsg[i]) {\n            return obj[i];\n        }\n        if (typeof obj[i] === \"object\") {\n            result = findMessage(obj[i]);\n            if (result) {\n                return result;\n            }\n        }\n    }\n}\n//this should understand all the message formats from the server and translate to a nice message\nfunction psychicMessageParser(mess, statusCode) {\n    var nice;\n    if (typeof mess === \"string\") {\n        try {\n            nice = findMessage(JSON.parse(mess));\n            if (!nice) {\n                //fallback if nothing found - return raw JSON string anyway\n                nice = mess;\n            }\n        } catch (e) {\n            nice = mess ? mess.replace(htmlMsgRegex, \"$1\") : \"Unknown error\";\n        }\n        if (statusCode === 404 && mess.length > 300) {\n            //server returned a dirty 404\n            nice = \"Not found\";\n        }\n    } else {\n        nice = findMessage(mess);\n    }\n    return nice;\n}\n\nmodule.exports = function (result) {\n    var error, code;\n    if (result.response) {\n        code = ~~ (result.response.statusCode);\n        error = mkerr({\n            statusCode: code,\n            message: \"\"+psychicMessageParser(result.body||result.error.message, code),\n            response: result.response,\n            body: result.body,\n        }, result.error);\n    } else {\n        error = mkerr({\n            statusCode: 0,\n        }, result.error);\n    }\n    return error;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/errors/errorify.js","\nmodule.exports = {\n    configure(input){\n        return (opts) => {\n            // Modify XHR opts using context from the inputs\n\n            return opts\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/decorators/index.js","const mkerr = require(\"./errors/mkerr\")\nconst helpers = require(\"./helpers\")\n\n\nmodule.exports = {\n    process(originalInput, guarantees) {\n        let input = Object.assign({}, originalInput)\n        if (guarantees.requires) {\n            guarantees.requires.forEach(key => {\n                if (input[key] === undefined) {\n                    throw mkerr({\n                        message: `Invalid input, ${key} field required`,\n                        hint: `${key} field required`\n                    })\n                }\n            })\n        }\n        if (guarantees.optional) {\n            guarantees.optional.forEach(key => {\n                if (key in input && input[key] === undefined) {\n                    helpers.hintDeveloper(`${key} field was explicitly passed an undefined value. It's likely an accident. Avoid specifying the property at all if it's undefined.`)\n                }\n            })\n        }\n        if (guarantees.fsIdentification) {\n            if (!(input.fileId || input.folderId || input.path)) {\n                throw mkerr({\n                    message: `Identify a file or folder. One of the fields must be specified: fileId folderId path`,\n                    hint: `Identify a file or folder. One of the fields must be specified: fileId folderId path`\n                })\n            } else {\n                input = handleIdentification(input)\n            }\n        }\n        return input\n    }\n}\n\nconst goodId = /^[0-9a-z\\-]+$/i\nfunction detectIncorrectId(key, id){\n    if(!goodId.test(id)){\n        throw mkerr({\n            message: `Invalid file or folder identification, ${key} field seems to contain something else than an ID`,\n            hint: `${key} field expected to match ${goodId.toString()}`\n        })\n    }\n}\n\nfunction handleIdentification(input){\n    if(input.fileId){\n        detectIncorrectId(\"fileId\", input.fileId)\n        input.pathFromRoot = \"/ids/file/\"+input.fileId\n        return input\n    }\n    if(input.folderId){\n        detectIncorrectId(\"folderId\", input.folderId)\n        input.pathFromRoot = \"/ids/file/\"+input.folderId\n        return input\n    }\n    if(input.path){\n        input.pathFromRoot = helpers.encodePathComponents(input.path)\n        return input\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/inputHandler.js","const ENDPOINTS = require(\"./ENDPOINTS\");\n\nmodule.exports = {\n    init(core) {\n        const mkReqFunction = core._.mkReqFunction\n        authAPI = {\n            getUserInfo: mkReqFunction({}, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        var opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.userinfo),\n                        };\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.body);\n            }),\n            isAuthorized: mkReqFunction({}, (tools) =>\n                tools.requestEngine.isAuthorized()\n            ),\n\n        }\n\n        core.API.auth = authAPI\n        return authAPI\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/auth.js","const ENDPOINTS = require(\"./ENDPOINTS\");\n\nmodule.exports = {\n    init(core) {\n        const mkReqFunction = core._.mkReqFunction\n        const fsAPI = {\n            get: mkReqFunction({\n                fsIdentification: true,\n                optional: [\"versionEntryId\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot),\n                        };\n\n                        if (input.versionEntryId) {\n                            opts.params = {\n                                \"entry_id\": input.versionEntryId\n                            };\n                        }\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.body);\n            }),\n            exists: mkReqFunction({\n                fsIdentification: true\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot),\n                        };\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(\n                        result => (result.response.statusCode == 200), //breaking change\n                        result => { //result.error result.response, result.body\n                            if (result.response && result.response.statusCode == 404) {\n                                return false;\n                            } else {\n                                throw result;\n                            }\n                        }\n                    );\n            }),\n            parents: mkReqFunction({\n                fsIdentification: true\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot + \"/parents\")\n                        };\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.body);\n\n            }),\n            createFolder: mkReqFunction({\n                fsIdentification: true\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"POST\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot),\n                            json: {\n                                \"action\": \"add_folder\"\n                            }\n                        }\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.body); //breaking change\n\n            }),\n            //breaking change - no more rename, can be implemented properly later\n            move: mkReqFunction({\n                fsIdentification: true,\n                requires: [\"destination\"]\n            }, transfer.bind(null, \"move\")),\n            copy: mkReqFunction({\n                fsIdentification: true,\n                requires: [\"destination\"]\n            }, transfer.bind(null, \"copy\")),\n            remove: mkReqFunction({\n                fsIdentification: true,\n                optional: [\"versionEntryId\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"DELETE\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot),\n                        };\n                        if (input.versionEntryId) {\n                            opts.params = {\n                                \"entry_id\": versionEntryId\n                            };\n                        }\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.response.statusCode); //backwards commpatibility\n\n            }),\n        }\n\n        core.API.storage = fsAPI\n        return fsAPI\n    }\n}\n\n\nfunction transfer(action, tools, decorate, input) {\n    return Promise.resolve()\n        .then(() => {\n            const newPath = tools.helpers.encodeNameSafe(input.destination);\n            const opts = {\n                method: \"POST\",\n                url: tools.requestEngine.getEndpoint(ENDPOINTS.fsmeta + input.pathFromRoot),\n                json: {\n                    \"action\": action,\n                    \"destination\": newPath,\n                }\n            };\n            return tools.requestEngine.promiseRequest(decorate(opts));\n        })\n        .then(result => result.body); //breaking change\n    // .then(function (result) { //result.response result.body\n    //     if (result.response.statusCode == 200) {\n    //         return {\n    //             oldPath: pathFromRoot,\n    //             path: newPath\n    //         };\n    //     }\n    // });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/fs.js","const ENDPOINTS = require(\"./ENDPOINTS\");\n\nmodule.exports = {\n    init(core) {\n        const mkReqFunction = core._.mkReqFunction\n        const fsBrowserAPI = {\n            download: mkReqFunction({\n                fsIdentification: true,\n                optional: [\"versionEntryId\", \"isBinary\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        const opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fscontent + input.pathFromRoot),\n                        };\n                        if (input.versionEntryId) {\n                            opts.params = {\n                                \"entry_id\": input.versionEntryId\n                            };\n                        }\n\n                        if (input.isBinary) {\n                            opts.responseType = \"arraybuffer\";\n                        }\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.response);\n            }),\n            storeFile: mkReqFunction({\n                fsIdentification: true,\n                requires: [\"file\"],\n                optional: [\"mimeType\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n\n                        const opts = {\n                            method: \"POST\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fscontent + input.pathFromRoot),\n                            body: input.file,\n                        }\n\n                        opts.headers = {};\n                        if (input.mimeType) {\n                            opts.headers[\"Content-Type\"] = input.mimeType;\n                        }\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => {\n                        result.body.id = result.response.headers[\"etag\"] //for backward compatibility\n                        return result.body\n                    });\n            }),\n            //TODO: check if EOS supports this\n            storeFileMultipart: mkReqFunction({\n                fsIdentification: true,\n                requires: [\"file\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        if (!window.FormData) {\n                            throw new Error(\"Unsupported browser\");\n                        }\n                        var file = fileOrBlob;\n                        var formData = new window.FormData();\n                        formData.append('file', file);\n                        pathFromRoot = helpers.encodeNameSafe(pathFromRoot) || \"\";\n                        var opts = {\n                            method: \"POST\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.fscontent + input.pathFromRoot),\n                            body: formData,\n                        };\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => {\n                        result.body.id = result.response.headers[\"etag\"] //for backward compatibility\n                        return result.body\n                    });\n            }),\n\n        }\n\n        core.API.storage = Object.assign(core.API.storage, fsBrowserAPI)\n        return fsBrowserAPI\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/fs-browser.js","const ENDPOINTS_links = require(\"./ENDPOINTS\").links;\n\nmodule.exports = {\n    init(core) {\n        const mkReqFunction = core._.mkReqFunction\n        const linksAPI = {\n            createLink: mkReqFunction({\n                requires: [\"path\", \"linkSetup\"],\n                fsIdentification: true\n            }, (tools, decorate, input) => {\n                const linkSetup = input.linkSetup\n                const defaults = {\n                    path: null,\n                    type: \"file\",\n                    accessibility: \"domain\"\n                };\n                return Promise.resolve()\n                    .then(() => {\n                        const setup = Object.assign(defaults, linkSetup, {\n                            path: input.pathFromRoot\n                        });\n                        // setup.path = tools.encodeNameSafe(setup.path);\n\n                        return tools.requestEngine.promiseRequest(decorate({\n                            method: \"POST\",\n                            url: tools.requestEngine.getEndpoint() + ENDPOINTS_links,\n                            json: setup\n                        }));\n                    }).then(function (result) { //result.response result.body\n                        return result.body;\n                    });\n            }),\n            removeLink: mkReqFunction({\n                requires: [\"id\"]\n            }, (tools, decorate, input) => {\n                return tools.requestEngine.promiseRequest(decorate({\n                    method: \"DELETE\",\n                    url: tools.requestEngine.getEndpoint() + ENDPOINTS_links + \"/\" + input.id\n                })).then(function (result) { //result.response result.body\n                    return result.response.statusCode;\n                });\n            }),\n            listLink: mkReqFunction({\n                requires: [\"id\"]\n            }, (tools, decorate, input) => {\n                return tools.requestEngine.promiseRequest(decorate({\n                    method: \"GET\",\n                    url: tools.requestEngine.getEndpoint() + ENDPOINTS_links + \"/\" + input.id\n                })).then(function (result) { //result.response result.body\n                    return result.body;\n                });\n            }),\n            listLinks: mkReqFunction({\n                requires: [\"filters\"]\n            }, (tools, decorate, input) => {\n                const filters = input.filters\n                return Promise.resolve()\n                    .then(function () {\n                        filters.path = filters.path && tools.helpers.encodeNameSafe(filters.path);\n\n                        return tools.requestEngine.promiseRequest(decorate({\n                            method: \"get\",\n                            url: tools.requestEngine.getEndpoint() + ENDPOINTS_links,\n                            params: filters\n                        }));\n                    }).then(function (result) { //result.response result.body\n                        return result.body;\n                    });\n            }),\n            findOne: mkReqFunction({\n                requires: [\"filters\"]\n            }, (tools, decorate, input) => {\n                return linksAPI.listLinks(input).then(function (list) {\n                    if (list.ids && list.ids.length > 0) {\n                        return linksAPI.listLink({\n                            id: list.ids[0]\n                        });\n                    } else {\n                        return null;\n                    }\n                });\n            }),\n        }\n\n        core.API.link = linksAPI\n        return linksAPI\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/links.js","const ENDPOINTS = require(\"./ENDPOINTS\");\n\nmodule.exports = {\n    init(core) {\n        const mkReqFunction = core._.mkReqFunction;\n        usersAPI = {\n            getById: mkReqFunction({\n                fsIdentification: false,\n                requires: [\"id\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        let opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.users + input.id),\n                        };\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => result.body);\n            }),\n            getByName: mkReqFunction({\n                fsIdentification: false,\n                requires: [\"name\"]\n            }, (tools, decorate, input) => {\n                return Promise.resolve()\n                    .then(() => {\n                        let opts = {\n                            method: \"GET\",\n                            url: tools.requestEngine.getEndpoint(ENDPOINTS.users),\n                            params: {\n                                filter: \"userName eq \\\"\" + input.name + \"\\\"\"\n                            }\n                        };\n\n                        return tools.requestEngine.promiseRequest(decorate(opts));\n                    })\n                    .then(result => {\n                        if(result.body.resources && result.body.resources[0]){\n                            return result.body.resources[0];\n                        } else {\n                            throw tools.mkerr({\n                                message: `User not found`\n                            });\n                        }\n                    });\n            }),\n        };\n\n        core.API.user = usersAPI;\n        return usersAPI\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/users.js","const core = require(\"./core\")\nconst defaults = require(\"./defaults.js\");\n\nmodule.exports = {\n    init(egnyteDomainURL, opts) {\n        //TODO: plug in httpRequest depending on env\n        const instance = core.instance(Object.assign({httpRequest: require(\"request\")}, defaults, opts))\n        instance.setDomain(egnyteDomainURL)\n        return instance\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = {\n    handleQuota: true,\n    QPS: 2\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults.js","\"use strict\";\nvar window = require(\"global/window\")\nvar once = require(\"once\")\nvar parseHeaders = require(\"parse-headers\")\n\n\n\nmodule.exports = createXHR\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction createXHR(options, callback) {\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            loadFunc()\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else if (xhr.responseType === \"text\" || !xhr.responseType) {\n            body = xhr.responseText || xhr.responseXML\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    var failureResponse = {\n                body: undefined,\n                headers: {},\n                statusCode: 0,\n                method: method,\n                url: uri,\n                rawRequest: xhr\n            }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        callback(err, response, response.body)\n\n    }\n\n    if (typeof options === \"string\") {\n        options = { uri: options }\n    }\n\n    options = options || {}\n    if(typeof callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n    callback = once(callback)\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n\n    if (\"json\" in options) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            aborted=true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    xhr.send(body)\n\n    return xhr\n\n\n}\n\nfunction noop() {}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/index.js\n// module id = 16\n// module chunks = 0","if (typeof window !== \"undefined\") {\n    module.exports = window;\n} else if (typeof global !== \"undefined\") {\n    module.exports = global;\n} else if (typeof self !== \"undefined\"){\n    module.exports = self;\n} else {\n    module.exports = {};\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/global/window.js\n// module id = 17\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 18\n// module chunks = 0","module.exports = once\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var called = false\n  return function () {\n    if (called) return\n    called = true\n    return fn.apply(this, arguments)\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/once/once.js\n// module id = 19\n// module chunks = 0","var trim = require('trim')\n  , forEach = require('for-each')\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  forEach(\n      trim(headers).split('\\n')\n    , function (row) {\n        var index = row.indexOf(':')\n          , key = trim(row.slice(0, index)).toLowerCase()\n          , value = trim(row.slice(index + 1))\n\n        if (typeof(result[key]) === 'undefined') {\n          result[key] = value\n        } else if (isArray(result[key])) {\n          result[key].push(value)\n        } else {\n          result[key] = [ result[key], value ]\n        }\n      }\n  )\n\n  return result\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/parse-headers/parse-headers.js\n// module id = 20\n// module chunks = 0","\nexports = module.exports = trim;\n\nfunction trim(str){\n  return str.replace(/^\\s*|\\s*$/g, '');\n}\n\nexports.left = function(str){\n  return str.replace(/^\\s*/, '');\n};\n\nexports.right = function(str){\n  return str.replace(/\\s*$/, '');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js\n// module id = 21\n// module chunks = 0","var isFunction = require('is-function')\n\nmodule.exports = forEach\n\nvar toString = Object.prototype.toString\nvar hasOwnProperty = Object.prototype.hasOwnProperty\n\nfunction forEach(list, iterator, context) {\n    if (!isFunction(iterator)) {\n        throw new TypeError('iterator must be a function')\n    }\n\n    if (arguments.length < 3) {\n        context = this\n    }\n    \n    if (toString.call(list) === '[object Array]')\n        forEachArray(list, iterator, context)\n    else if (typeof list === 'string')\n        forEachString(list, iterator, context)\n    else\n        forEachObject(list, iterator, context)\n}\n\nfunction forEachArray(array, iterator, context) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            iterator.call(context, array[i], i, array)\n        }\n    }\n}\n\nfunction forEachString(string, iterator, context) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        iterator.call(context, string.charAt(i), i, string)\n    }\n}\n\nfunction forEachObject(object, iterator, context) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            iterator.call(context, object[k], k, object)\n        }\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js\n// module id = 22\n// module chunks = 0","module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js\n// module id = 23\n// module chunks = 0"],"sourceRoot":""}